/*
================================================================================
|                                                                              |
|                      ğŸŒ™ åŸç¥ - é™è°§æ˜Ÿå¤œ (Dark Theme) ğŸŒ™                      |
|                                                                              |
================================================================================
*/

:root {
    /* ------------------------- ğŸŒˆ ä¸»é¢˜åç§°ä¸æ¨¡å¼ ------------------------- */
    --theme-name: "åŸç¥ - é™è°§æ˜Ÿå¤œ";
    --theme-mode: "dark";

    /* ------------------------- ğŸ¨ æ ¸å¿ƒé…è‰²æ–¹æ¡ˆ (æš—è‰²) ----------------------- */

    /* åŸºç¡€è‰²æ¿ - Teyvat Night Palette */
    --gi-gold-primary-rgb: 222, 178, 111; /* #DEB26F - Main Gold Accent (remains key) */
    --gi-gold-secondary-rgb: 240, 210, 150; /* #F0D296 - Lighter Gold/Highlight */
    --gi-gold-dark-rgb: 160, 120, 65;    /* #A07841 - Darker Gold for Accents/Borders */

    --gi-night-deep-rgb: 22, 26, 40;       /* #161A28 - Deepest Night Sky / Body BG */
    --gi-night-medium-rgb: 33, 39, 58;    /* #21273A - Main Container BG */
    --gi-night-elevated-rgb: 45, 52, 75;  /* #2D344B - Elevated Surfaces (inputs, cards) */
    --gi-night-border-rgb: 60, 70, 95;    /* #3C465F - Subtle Borders */

    --gi-text-light-gold-rgb: 235, 225, 200; /* #EBE1C8 - Primary Text */
    --gi-text-light-grey-rgb: 180, 185, 195; /* #B4B9C3 - Secondary Text */
    --gi-text-placeholder-dark-rgb: 150, 155, 165; /* #969BA5 - Placeholder Text (adjusted for better contrast) */

    /* å…ƒç´ è‰² - Elemental Hues (remain the same, will pop against dark BG) */
    --gi-anemo-rgb: 114, 224, 197;   /* #72E0C5 */
    --gi-geo-rgb: 255, 195, 67;     /* #FFC343 */
    --gi-electro-rgb: 176, 140, 255; /* #B08CFF */
    --gi-dendro-rgb: 153, 204, 51;   /* #99CC33 */
    --gi-hydro-rgb: 77, 187, 255;   /* #4DBBFF */
    --gi-pyro-rgb: 255, 123, 89;    /* #FF7B59 */
    --gi-cryo-rgb: 153, 221, 255;   /* #99DDFF */

    /* é€šç”¨ UI é…è‰² */
    --color-primary: rgb(var(--gi-gold-primary-rgb));
    --color-accent: rgb(var(--gi-gold-secondary-rgb));
    --color-background-body: rgb(var(--gi-night-deep-rgb));
    --color-background-container: rgb(var(--gi-night-medium-rgb));
    --color-background-elevated: rgb(var(--gi-night-elevated-rgb));

    --color-text-primary: rgb(var(--gi-text-light-gold-rgb));
    --color-text-secondary: rgb(var(--gi-text-light-grey-rgb));
    --color-text-placeholder: rgb(var(--gi-text-placeholder-dark-rgb));
    --color-text-on-accent: rgb(var(--gi-night-deep-rgb)); /* Text on gold backgrounds */
    --color-text-link: rgb(var(--gi-gold-secondary-rgb));

    --color-border-primary: rgb(var(--gi-gold-dark-rgb));
    --color-border-secondary: rgb(var(--gi-night-border-rgb));
    --color-border-interactive: rgba(var(--gi-gold-primary-rgb), 0.7);

    --color-status-online: rgb(var(--gi-dendro-rgb));
    --color-status-notification: rgb(var(--gi-pyro-rgb));
    --color-shadow-soft: rgba(0, 0, 0, 0.2); /* Darker shadows for depth */
    --color-shadow-medium: rgba(0, 0, 0, 0.3);
    --color-shadow-glow: rgba(var(--gi-gold-primary-rgb), 0.15); /* For subtle gold glows */

    /* æ¶ˆæ¯æ°”æ³¡ */
    --color-message-sent-bg: linear-gradient(135deg, rgb(var(--gi-gold-dark-rgb)), rgb(var(--gi-gold-dark-rgb)));
    --color-message-sent-text: rgb(var(--gi-text-light-gold-rgb));
    --color-message-received-bg: rgb(var(--gi-night-elevated-rgb));
    --color-message-received-text: rgb(var(--gi-text-light-gold-rgb));
    --color-message-system-bg: rgba(var(--gi-night-deep-rgb), 0.7);
    --color-message-system-text: rgb(var(--gi-text-light-grey-rgb));
    --color-message-system-border: rgb(var(--gi-night-border-rgb));

    /* è§’è‰²ä¸“å±é…è‰² (Primary/Secondary/Accent remain for general color identity) */
    /* Message Backgrounds need dark versions */
    /* ğŸ’  Paimon - æ´¾è’™ */
    --gi-char-paimon-primary-rgb: 250, 250, 255;
    --gi-char-paimon-secondary-rgb: 70, 85, 120; /* Darker blue for dark theme contrast */
    --gi-char-paimon-accent-rgb: 255, 215, 0;
    --gi-char-paimon-primary: rgb(var(--gi-char-paimon-primary-rgb));
    --gi-char-paimon-secondary: rgb(var(--gi-char-paimon-secondary-rgb));
    --gi-char-paimon-accent: rgb(var(--gi-char-paimon-accent-rgb));
    --gi-char-paimon-msg-bg-dark: linear-gradient(135deg, #2a2f48, #3a3f58);

    /* æ—… Traveler - æ—…è¡Œè€… (ç©º/è§) */
    --gi-char-traveler-primary-rgb: 180, 150, 120; /* Slightly lighter brown for dark */
    --gi-char-traveler-secondary-rgb: var(--gi-anemo-rgb);
    --gi-char-traveler-accent-rgb: var(--gi-gold-secondary-rgb);
    --gi-char-traveler-primary: rgb(var(--gi-char-traveler-primary-rgb));
    --gi-char-traveler-secondary: rgb(var(--gi-char-traveler-secondary-rgb));
    --gi-char-traveler-accent: rgb(var(--gi-char-traveler-accent-rgb));
    --gi-char-traveler-msg-bg-dark: linear-gradient(135deg, #253835, #304840);

    /* âš–ï¸ Zhongli - é’Ÿç¦» */
    --gi-char-zhongli-primary-rgb: 70, 60, 55;    /* Lighter shade of his suit for dark */
    --gi-char-zhongli-secondary-rgb: var(--gi-geo-rgb);
    --gi-char-zhongli-accent-rgb: 200, 200, 200;  /* Muted white for shirt */
    --gi-char-zhongli-primary: rgb(var(--gi-char-zhongli-primary-rgb));
    --gi-char-zhongli-secondary: rgb(var(--gi-char-zhongli-secondary-rgb));
    --gi-char-zhongli-accent: rgb(var(--gi-char-zhongli-accent-rgb));
    --gi-char-zhongli-msg-bg-dark: linear-gradient(135deg, #3a3228, #483d30);

    /* ğŸƒ Venti - æ¸©è¿ª */
    --gi-char-venti-primary-rgb: var(--gi-anemo-rgb);
    --gi-char-venti-secondary-rgb: 30, 120, 100;   /* Slightly brighter dark green */
    --gi-char-venti-accent-rgb: 235, 235, 235;
    --gi-char-venti-primary: rgb(var(--gi-char-venti-primary-rgb));
    --gi-char-venti-secondary: rgb(var(--gi-char-venti-secondary-rgb));
    --gi-char-venti-accent: rgb(var(--gi-char-venti-accent-rgb));
    --gi-char-venti-msg-bg-dark: linear-gradient(135deg, #203f3a, #284d46);

    /* âš¡ Raiden Shogun - é›·ç”µå°†å†› */
    --gi-char-raidenshogun-primary-rgb: 110, 90, 160; /* Slightly lighter deep purple */
    --gi-char-raidenshogun-secondary-rgb: var(--gi-electro-rgb);
    --gi-char-raidenshogun-accent-rgb: var(--gi-pyro-rgb);
    --gi-char-raidenshogun-primary: rgb(var(--gi-char-raidenshogun-primary-rgb));
    --gi-char-raidenshogun-secondary: rgb(var(--gi-char-raidenshogun-secondary-rgb));
    --gi-char-raidenshogun-accent: rgb(var(--gi-char-raidenshogun-accent-rgb));
    --gi-char-raidenshogun-msg-bg-dark: linear-gradient(135deg, #302a4a, #403858);

    /* ğŸ”¥ Hu Tao - èƒ¡æ¡ƒ */
    --gi-char-hutao-primary-rgb: 169, 30, 30; /* Slightly brighter dark red */
    --gi-char-hutao-secondary-rgb: var(--gi-pyro-rgb);
    --gi-char-hutao-accent-rgb: 70, 70, 70;
    --gi-char-hutao-primary: rgb(var(--gi-char-hutao-primary-rgb));
    --gi-char-hutao-secondary: rgb(var(--gi-char-hutao-secondary-rgb));
    --gi-char-hutao-accent: rgb(var(--gi-char-hutao-accent-rgb));
    --gi-char-hutao-msg-bg-dark: linear-gradient(135deg, #4a2a2a, #583838);

    /* ğŸ Kazuha - æ«åŸä¸‡å¶ */
    --gi-char-kazuha-primary-rgb: 215, 102, 102;  /* Slightly brighter maple red */
    --gi-char-kazuha-secondary-rgb: var(--gi-anemo-rgb);
    --gi-char-kazuha-accent-rgb: 225, 225, 225;
    --gi-char-kazuha-primary: rgb(var(--gi-char-kazuha-primary-rgb));
    --gi-char-kazuha-secondary: rgb(var(--gi-char-kazuha-secondary-rgb));
    --gi-char-kazuha-accent: rgb(var(--gi-char-kazuha-accent-rgb));
    --gi-char-kazuha-msg-bg-dark: linear-gradient(135deg, #4a302a, #583d38);

    /* ------------------------- âœ’ï¸ å­—ä½“æ’ç‰ˆ -------------------------- */
    --font-family: "HYWenHei-85W", "Noto Serif SC", "Source Han Serif CN", "Cinzel", serif;
    --font-size-base: 15px;
    --font-size-small: 13px;
    --font-size-large: 18px;
    /* --font-size-xl: 22px; -- Removed as value > 20px */
    --line-height-base: 1.6;

    /* ------------------------- âœ¨ æ•´ä½“é£æ ¼å‚æ•° ------------------------ */
    --border-radius-small: 4px;
    --border-radius-medium: 6px;
    --border-radius-large: 8px;
    /* --border-radius-pill: 50px; -- Removed as value > 20px */
    --shadow-elevation-1: 0 1px 3px 0 var(--color-shadow-soft), 0 1px 2px 0 var(--color-shadow-soft);
    --shadow-elevation-2: 0 3px 6px -1px var(--color-shadow-soft), 0 2px 4px -1px var(--color-shadow-soft);
    --shadow-elevation-3: 0 6px 10px -2px var(--color-shadow-medium), 0 4px 6px -2px var(--color-shadow-medium);
    --shadow-ornate: 0 0 0 1px rgba(var(--gi-gold-dark-rgb),0.5), 0 2px 5px var(--color-shadow-glow);
    --transition-fast: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-medium: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

    --scrollbar-track-color: rgba(var(--gi-night-deep-rgb), 0.7);
    --scrollbar-thumb-color: rgb(var(--gi-gold-dark-rgb));
    --scrollbar-thumb-hover-color: rgb(var(--gi-gold-primary-rgb));
    --scrollbar-size: 8px;
}


/* ------------------------- ğŸŒ å…¨å±€ä¸åŸºç¡€æ ·å¼ ------------------------ */
*,
*::before,
*::after {
    box-sizing: border-box;


}

body {
    font-family: var(--font-family);
    font-size: var(--font-size-base);

    color: var(--color-text-primary);
    background-color: var(--color-background-body);
    /* Starry night SVG pattern */
    background-image: url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%232D344B' fill-opacity='0.2'%3E%3Ccircle cx='20' cy='20' r='1.5'/%3E%3Ccircle cx='60' cy='60' r='1.5'/%3E%3Ccircle cx='20' cy='60' r='1'/%3E%3Ccircle cx='60' cy='20' r='1'/%3E%3Ccircle cx='40' cy='40' r='2'/%3E%3Ccircle cx='40' cy='0' r='1'/%3E%3Ccircle cx='40' cy='80' r='1'/%3E%3Ccircle cx='0' cy='40' r='1'/%3E%3Ccircle cx='80' cy='40' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"),
    linear-gradient(to bottom, rgb(var(--gi-night-deep-rgb)), rgb(var(--gi-night-medium-rgb)));
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow-x: hidden;
}

a {
    color: var(--color-text-link);
    text-decoration: none;
    transition: var(--transition-fast);
}
a:hover {
    color: var(--color-primary);
    text-decoration: underline;
    text-decoration-color: var(--color-primary);
}

img {
    max-width: 100%;

    display: block;
}

/* Scrollbar Styling */
::-webkit-scrollbar {
    width: var(--scrollbar-size);
    height: var(--scrollbar-size);
}
::-webkit-scrollbar-track {
    background-color: var(--scrollbar-track-color);
}
::-webkit-scrollbar-thumb {
    background-color: var(--scrollbar-thumb-color);
    border: 2px solid transparent;
    background-clip: content-box;
}
::-webkit-scrollbar-thumb:hover {
    background-color: var(--scrollbar-thumb-hover-color);
}


/* ------------------------- ğŸ›ï¸ é¡µé¢ç»“æ„ä¸å®¹å™¨ ------------------------ */
.app-container {
    display: flex;

    /* max-width: 1600px; -- Removed as value > 20px */

    background-color: var(--color-background-container);
    box-shadow: 0 0 40px rgba(0,0,0, 0.3), 0 0 0 1px rgba(var(--gi-gold-primary-rgb), 0.1); /* Subtle gold edge glow */
    overflow: hidden;
    border: 1px solid var(--color-border-secondary);
}

/* ------------------------- ğŸ§­ ä¾§è¾¹æ  .sidebar-nav -------------------- */
.sidebar-nav {
    /* -- Removed as value > 20px */
    /* min-width: 280px; -- Removed as value > 20px */
    background-color: rgba(var(--gi-night-deep-rgb), 0.6); /* Translucent dark */
    border-right: 1px solid var(--color-border-secondary);
    display: flex;
    flex-direction: column;

    position: relative;
    overflow-y: auto;
}
.sidebar-nav::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;

    background: linear-gradient(90deg, transparent, var(--color-primary), transparent);
    opacity: 0.5; /* Slightly more subtle in dark mode */
}

.search-bar {

    position: relative;
}
.search-bar input[type="text"] {

    /*  -- Removed as 40px > 20px */
    border-radius: var(--border-radius-medium);
    border: 1px solid var(--color-border-secondary);
    background-color: var(--color-background-elevated);
    color: var(--color-text-primary);
    font-family: var(--font-family);
    transition: var(--transition-medium);
    box-shadow: var(--shadow-elevation-1);
}
.search-bar input[type="text"]::placeholder {
    color: var(--color-text-placeholder);
}
.search-bar input[type="text"]:focus {
    outline: none;
    border-color: var(--color-border-interactive);
    box-shadow: 0 0 0 2px rgba(var(--gi-gold-primary-rgb), 0.3), var(--shadow-elevation-1);
}
.search-bar::before {
    content: "ğŸ”";
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--color-text-secondary);
    font-size: 16px;
}

.chat-list {
    list-style: none;
    overflow-y: auto;
    flex-grow: 1;
}
.chat-list-item {
    display: flex;
    align-items: center;


    border-radius: var(--border-radius-medium);
    cursor: pointer;
    transition: var(--transition-fast);
    border: 1px solid transparent;
    position: relative;
}
.chat-list-item:hover {
    background-color: rgba(var(--gi-night-elevated-rgb), 0.7);
}
.chat-list-item.active {
    background-color: rgba(var(--gi-gold-primary-rgb), 0.8); /* Gold accent for active state */
    color: var(--color-text-on-accent);
    box-shadow: var(--shadow-ornate);
    border: 1px solid var(--color-border-primary);
}
.chat-list-item.active .chat-list-name,
.chat-list-item.active .chat-list-preview {
    color: var(--color-text-on-accent) !important;
}

.chat-list-avatar {
    /* -- Removed as value > 20px */
    /* -- Removed as value > 20px */
    border-radius: 50%;

    object-fit: cover;
    background-color: var(--color-border-secondary);
    border: 2px solid transparent;
    box-shadow: var(--shadow-elevation-1);
}
.chat-list-item.active .chat-list-avatar {
    border-color: var(--color-background-body); /* Contrast against gold */
}

.chat-list-details {
    flex-grow: 1;
    overflow: hidden;
}
.chat-list-name {
    font-weight: 600;
    font-size: var(--font-size-base);
    color: var(--color-text-primary);

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.chat-list-preview {
    font-size: var(--font-size-small);
    color: var(--color-text-secondary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.chat-list-badge {
    background-color: var(--color-status-notification);
    color: white;
    font-size: 11px;
    font-weight: bold;


    min-width: 20px;
    text-align: center;
}


/* ------------------------- ğŸ“œ èŠå¤©ä¸»åŒº .chat-area -------------------- */
.chat-area {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    background-color: var(--color-background-body); /* Darkest part */
    overflow: hidden;
}

.chat-header-main {

    border-bottom: 1px solid var(--color-border-secondary);
    background: linear-gradient(to bottom, rgba(var(--gi-night-medium-rgb),0.9), rgba(var(--gi-night-elevated-rgb),0.9));
    display: flex;
    align-items: center;
    box-shadow: 0 1px 3px rgba(0,0,0, 0.2);
    /* min-height: 70px; -- Removed as value > 20px */
}
.chat-avatar-main {
    /* -- Removed as value > 20px */
    /* -- Removed as value > 20px */
    border-radius: 50%;

    object-fit: cover;
    background-color: var(--color-border-secondary);
    border: 2px solid var(--color-border-primary);
    box-shadow: var(--shadow-elevation-1);
}
.chat-title-main {
    font-size: var(--font-size-large);
    font-weight: 600;
    color: var(--color-text-primary);
}
.chat-status-main {
    font-size: var(--font-size-small);
    color: var(--color-text-secondary);

    display: flex;
    align-items: center;
}
.chat-status-main::before {
    content: '';
    display: inline-block;


    border-radius: 50%;
    background-color: var(--color-status-online);

    animation: pulse-dark 2s infinite;
}
@keyframes pulse-dark { /* Adjusted pulse for dark theme */
    0% { box-shadow: 0 0 0 0 rgba(var(--gi-dendro-rgb), 0.7); }
    70% { box-shadow: 0 0 0 5px rgba(var(--gi-dendro-rgb), 0); }
    100% { box-shadow: 0 0 0 0 rgba(var(--gi-dendro-rgb), 0); }
}

.chat-messages {
    flex-grow: 1;

    overflow-y: auto;
    display: flex;
    flex-direction: column-reverse;
}
.chat-messages > div {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.no-chat-selected {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    color: var(--color-text-secondary);
    /* Dark Paimon-themed pattern */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cdefs%3E%3Cpattern id='paimon-pattern-dark' width='50' height='50' patternUnits='userSpaceOnUse'%3E%3Cpath d='M25 5 L20 15 L10 15 L5 25 L10 35 L20 35 L25 45 L30 35 L40 35 L45 25 L40 15 L30 15 Z' fill='%23DEB26F' fill-opacity='0.05'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width='100' height='100' fill='url(%23paimon-pattern-dark)'/%3E%3C/svg%3E");
    background-repeat: repeat;
}
.no-chat-selected .logo-placeholder {
    /* font-size: 80px; -- Removed as value > 20px */

    filter: drop-shadow(0 2px 3px rgba(var(--gi-gold-primary-rgb),0.1));
}
.no-chat-selected p {
    font-size: var(--font-size-large);
}

/* ğŸ’¬ æ¶ˆæ¯æ°”æ³¡ .message */
.message {
    max-width: 75%;

    border-radius: var(--border-radius-large);
    box-shadow: var(--shadow-elevation-1);
    word-wrap: break-word;

    position: relative;
}
.message::before {
    content: "";
    position: absolute;
    bottom: 0px;


    border: 10px solid transparent;
}

.message.sent {
    background: var(--color-message-sent-bg);
    color: var(--color-message-sent-text);
    align-self: flex-end;
    border-bottom-right-radius: var(--border-radius-small);
}
.message.sent::before {
    right: -8px;
    border-left-color: rgb(var(--gi-gold-dark-rgb)); /* Match gradient end */
    border-right-width: 0;
    border-bottom-width: 0;
    transform: translateY(-2px);
}

.message.received {
    background-color: var(--color-message-received-bg);
    color: var(--color-message-received-text);
    align-self: flex-start;
    border-bottom-left-radius: var(--border-radius-small);
    border: 1px solid var(--color-border-secondary);
}
.message.received::before {
    left: -8px;
    border-right-color: var(--color-message-received-bg);
    border-left-width: 0;
    border-bottom-width: 0;
    transform: translateY(-2px);
}

.message-sender {
    font-size: var(--font-size-small);
    font-weight: 600;

    color: var(--color-text-secondary);
}
.message-timestamp {
    font-size: 11px;
    color: rgba(var(--gi-text-light-grey-rgb), 0.7);

    text-align: right;
}
.message.received .message-timestamp { text-align: left; }

.message.system {
    align-self: center;
    background-color: var(--color-message-system-bg);
    color: var(--color-message-system-text);
    font-size: var(--font-size-small);

    border-radius: var(--border-radius-medium);
    border: 1px dashed var(--color-message-system-border);
    max-width: 90%;
    text-align: center;
    box-shadow: none;
}
.message.system::before { display: none; }


/* âŒ¨ï¸ è¾“å…¥åŒº .chat-input-container */
.chat-input-container {

    border-top: 1px solid var(--color-border-secondary);
    background-color: var(--color-background-container);
    display: flex;
    box-shadow: 0 -1px 3px rgba(0,0,0, 0.1);
}
.chat-input-container textarea {
    flex-grow: 1;

    border-radius: var(--border-radius-medium);
    border: 1px solid var(--color-border-secondary);
    background-color: var(--color-background-elevated);
    font-family: var(--font-family);
    font-size: var(--font-size-base);
    color: var(--color-text-primary);
    resize: none;
    /* min-height: 48px; -- Removed as value > 20px */
    /* max-height: 120px; -- Removed as value > 20px */
    transition: var(--transition-medium);
    box-shadow: var(--shadow-elevation-1);
}
.chat-input-container textarea::placeholder {
    color: var(--color-text-placeholder);
}
.chat-input-container textarea:focus {
    outline: none;
    border-color: var(--color-border-interactive);
    box-shadow: 0 0 0 2px rgba(var(--gi-gold-primary-rgb), 0.3), var(--shadow-elevation-1);
}

#sendButtonMain {

    border-radius: var(--border-radius-medium);
    background-color: var(--color-primary);
    color: var(--color-text-on-accent);
    border: 1px solid var(--color-border-primary);
    cursor: pointer;
    font-family: var(--font-family);
    font-weight: 600;
    transition: var(--transition-fast);
    box-shadow: var(--shadow-ornate);
    font-size: 18px;

    /* min-width: 48px; -- Removed as value > 20px */
    /* min-height: 48px; -- Removed as value > 20px */
    display: flex;
    align-items: center;
    justify-content: center;
}
#sendButtonMain:hover {
    background-color: var(--color-accent);
    border-color: var(--color-primary);
    box-shadow: 0 0 0 2px rgba(var(--gi-gold-primary-rgb),0.4), var(--shadow-ornate);
}
#sendButtonMain:active {
    transform: translateY(1px);
}
#sendButtonMain::after {
}


/* â„¹ï¸ è¯¦æƒ…é¢æ¿ .details-panel */
.details-panel {
    /* -- Removed as value > 20px */
    /* min-width: 260px; -- Removed as value > 20px */
    background-color: rgba(var(--gi-night-deep-rgb), 0.9);
    border-left: 1px solid var(--color-border-secondary);
    color: var(--color-text-secondary);
}
.details-panel .details-header {
    text-align: center;

}
.details-panel .details-avatar {
    /* -- Removed as value > 20px */
    /* -- Removed as value > 20px */
    border-radius: 50%;

    object-fit: cover;
    border: 3px solid var(--color-primary);
    box-shadow: 0 0 10px var(--color-shadow-glow); /* Gold glow */
}
.details-panel .details-name {
    font-weight: 600;
    color: var(--color-text-primary);

}
.details-panel .details-title {
    font-size: var(--font-size-small);
    color: var(--color-text-secondary);

}
.details-section {

}
.details-section-title {
    font-size: var(--font-size-base);
    font-weight: 600;
    color: var(--color-text-primary);


    border-bottom: 1px solid var(--color-border-secondary);
    position: relative;
}
.details-section-title::after {
    content: '';
    position: absolute;
    left: 0;
    bottom: -1px;
    /* -- Removed as value > 20px */

    background-color: var(--color-primary);
}
.details-info-item {
    display: flex;

    font-size: var(--font-size-small);
}
.details-info-label {
    font-weight: 600;
    color: var(--color-text-primary);
    /* -- Removed as value > 20px */
    flex-shrink: 0;
}
.details-info-value {
    color: var(--color-text-secondary);
    flex-grow: 1;
}
.details-about-text {
    font-size: var(--font-size-small);

    color: var(--color-text-secondary);
    white-space: pre-wrap;
}


/* ğŸ”˜ æŒ‰é’® .btn, .btn-primary etc. */
.btn {
    display: inline-block;

    font-family: var(--font-family);
    font-size: var(--font-size-base);
    font-weight: 600;
    text-align: center;
    text-decoration: none;
    border-radius: var(--border-radius-medium);
    cursor: pointer;
    transition: var(--transition-fast);
    border: 1px solid transparent;
    box-shadow: var(--shadow-elevation-1);
}
.btn:hover {
    box-shadow: var(--shadow-elevation-2), 0 0 5px var(--color-shadow-glow);
}
.btn:active {
    transform: translateY(1px);
    box-shadow: none;
}

.btn-primary {
    background-color: var(--color-primary);
    color: var(--color-text-on-accent);
    border-color: var(--color-border-primary);
}
.btn-primary:hover {
    background-color: var(--color-accent);
    border-color: var(--color-primary);
}

.btn-secondary {
    background-color: var(--color-background-elevated);
    color: var(--color-text-primary);
    border-color: var(--color-border-secondary);
}
.btn-secondary:hover {
    background-color: rgb(var(--gi-night-elevated-rgb));
    border-color: var(--color-border-interactive);
}

.btn-danger {
    background-color: rgb(var(--gi-pyro-rgb));
    color: white;
    border-color: rgb(var(--gi-pyro-rgb));
}
.btn-danger:hover {
    background-color: rgb(var(--gi-pyro-rgb));
}


/* ğŸ–¼ï¸ å¼¹çª— .modal-content */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;


    background-color: rgba(var(--gi-night-deep-rgb), 0.7); /* Darker overlay */
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}
.modal-content {
    background-color: var(--color-background-container);
    /*  -- Removed as value > 20px */
    border-radius: var(--border-radius-large);
    box-shadow: var(--shadow-elevation-3), 0 0 0 1px rgba(var(--gi-gold-primary-rgb),0.3);

    /* max-width: 500px; -- Removed as value > 20px */
    border: 1px solid var(--color-border-secondary);
    position: relative;
}
.modal-header {
    font-weight: 600;
    color: var(--color-text-primary);


    border-bottom: 1px solid var(--color-border-secondary);
    position: relative;
}
.modal-header::after {
    content: '';
    position: absolute;
    left: 0;
    bottom: -1px;
    /* -- Removed as value > 20px */

    background-color: var(--color-primary);
}
.modal-body {

}
.modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
}
.modal-close-button {
    position: absolute;
    top: 15px;
    right: 15px;
    background: none;
    border: none;
    /* font-size: 24px; -- Removed as value > 20px */
    color: var(--color-text-secondary);
    cursor: pointer;
}
.modal-close-button:hover {
    color: var(--color-primary);
}

/* ------------------------- ğŸ‘¤ è§’è‰²ä¸“å±æ ·å¼ (æš—è‰²è°ƒæ•´) -------------------------- */

/* ğŸ’  Paimon - æ´¾è’™ */
.chat-list-item.active.AI_Paimon_åŸç¥ {
    background: linear-gradient(135deg, rgb(var(--gi-char-paimon-secondary-rgb)), rgb(var(--gi-char-paimon-secondary-rgb)));
    color: rgb(var(--gi-text-light-gold-rgb));
    border-color: rgb(var(--gi-char-paimon-accent-rgb));
}
.chat-list-item.active.AI_Paimon_åŸç¥ .chat-list-name,
.chat-list-item.active.AI_Paimon_åŸç¥ .chat-list-preview {
    color: rgb(var(--gi-text-light-gold-rgb)) !important;
}
.chat-list-avatar.AI_Paimon_åŸç¥ {
    border: 2px solid rgb(var(--gi-char-paimon-accent-rgb));
    box-shadow: 0 0 8px rgba(var(--gi-char-paimon-accent-rgb), 0.5); /* Enhanced glow */
}
.chat-avatar-main.AI_Paimon_åŸç¥ {
    border-color: rgb(var(--gi-char-paimon-accent-rgb));
}
.chat-header-main.current-chat-AI_Paimon_åŸç¥ .chat-title-main {
    color: rgb(var(--gi-char-paimon-accent-rgb)); /* Brighter title */
    text-shadow: 0 0 5px rgba(var(--gi-char-paimon-accent-rgb),0.5);
}
.message.received[data-sender-id="AI_Paimon_åŸç¥"] {
    background: var(--gi-char-paimon-msg-bg-dark);
    border-left: 4px solid rgb(var(--gi-char-paimon-accent-rgb));
}
.message.received[data-sender-id="AI_Paimon_åŸç¥"] .message-sender {
    color: rgb(var(--gi-char-paimon-accent-rgb));
}
.details-panel.AI_Paimon_åŸç¥ .details-avatar {
    border-color: rgb(var(--gi-char-paimon-accent-rgb));
    box-shadow: 0 0 10px rgba(var(--gi-char-paimon-accent-rgb), 0.7);
}
.details-panel.AI_Paimon_åŸç¥ .details-name {
    color: rgb(var(--gi-char-paimon-accent-rgb));
}

/* æ—… Traveler - æ—…è¡Œè€… */
.chat-list-item.active.AI_Traveler_åŸç¥ {
    background: linear-gradient(135deg, rgb(var(--gi-char-traveler-primary-rgb)), rgb(var(--gi-char-traveler-primary-rgb)));
    color: rgb(var(--gi-text-light-gold-rgb));
    border-color: rgb(var(--gi-char-traveler-secondary-rgb)); /* Anemo scarf */
}
.chat-list-avatar.AI_Traveler_åŸç¥ {
    border: 2px solid rgb(var(--gi-char-traveler-secondary-rgb));
    box-shadow: 0 0 8px rgba(var(--gi-char-traveler-secondary-rgb), 0.5);
}
.chat-header-main.current-chat-AI_Traveler_åŸç¥ .chat-title-main {
    color: rgb(var(--gi-char-traveler-accent-rgb)); /* Gold title */
}
.message.received[data-sender-id="AI_Traveler_åŸç¥"] {
    background: var(--gi-char-traveler-msg-bg-dark);
    border-left: 4px solid rgb(var(--gi-char-traveler-secondary-rgb));
}
.message.received[data-sender-id="AI_Traveler_åŸç¥"] .message-sender {
    color: rgb(var(--gi-char-traveler-accent-rgb));
}
/* ... Other character styles follow similar dark mode adjustments ... */

/* âš–ï¸ Zhongli - é’Ÿç¦» */
.chat-list-item.active.AI_Zhongli_åŸç¥ {
    background: linear-gradient(135deg, rgb(var(--gi-char-zhongli-primary-rgb)), rgb(var(--gi-char-zhongli-primary-rgb)));
    color: rgb(var(--gi-char-zhongli-secondary-rgb)); /* Geo text */
    border-color: rgb(var(--gi-char-zhongli-secondary-rgb));
}
.chat-list-avatar.AI_Zhongli_åŸç¥ {
    border: 2px solid rgb(var(--gi-char-zhongli-secondary-rgb));
    box-shadow: 0 0 8px rgba(var(--gi-char-zhongli-secondary-rgb), 0.5);
}
.chat-header-main.current-chat-AI_Zhongli_åŸç¥ .chat-title-main {
    color: rgb(var(--gi-char-zhongli-secondary-rgb)); /* Geo title */
}
.message.received[data-sender-id="AI_Zhongli_åŸç¥"] {
    background: var(--gi-char-zhongli-msg-bg-dark);
    border-left: 4px solid rgb(var(--gi-char-zhongli-secondary-rgb));
}
.message.received[data-sender-id="AI_Zhongli_åŸç¥"] .message-sender {
    color: rgb(var(--gi-char-zhongli-secondary-rgb));
}

/* ğŸƒ Venti - æ¸©è¿ª */
.chat-list-item.active.AI_Venti_åŸç¥ {
    background: linear-gradient(135deg, rgb(var(--gi-char-venti-secondary-rgb)), rgb(var(--gi-char-venti-secondary-rgb))); /* Dark green base */
    color: rgb(var(--gi-char-venti-primary-rgb)); /* Anemo text */
    border-color: rgb(var(--gi-char-venti-primary-rgb));
}
.chat-list-avatar.AI_Venti_åŸç¥ {
    border: 2px solid rgb(var(--gi-char-venti-primary-rgb));
    box-shadow: 0 0 8px rgba(var(--gi-char-venti-primary-rgb), 0.5);
}
.chat-header-main.current-chat-AI_Venti_åŸç¥ .chat-title-main {
    color: rgb(var(--gi-char-venti-primary-rgb)); /* Anemo title */
}
.message.received[data-sender-id="AI_Venti_åŸç¥"] {
    background: var(--gi-char-venti-msg-bg-dark);
    border-left: 4px solid rgb(var(--gi-char-venti-primary-rgb));
}
.message.received[data-sender-id="AI_Venti_åŸç¥"] .message-sender {
    color: rgb(var(--gi-char-venti-primary-rgb));
}

/* âš¡ Raiden Shogun - é›·ç”µå°†å†› */
.chat-list-item.active.AI_RaidenShogun_åŸç¥ {
    background: linear-gradient(135deg, rgb(var(--gi-char-raidenshogun-primary-rgb)), rgb(var(--gi-char-raidenshogun-primary-rgb)));
    color: rgb(var(--gi-char-raidenshogun-secondary-rgb)); /* Electro text */
    border-color: rgb(var(--gi-char-raidenshogun-secondary-rgb));
}
.chat-list-avatar.AI_RaidenShogun_åŸç¥ {
    border: 2px solid rgb(var(--gi-char-raidenshogun-secondary-rgb));
    box-shadow: 0 0 8px rgba(var(--gi-char-raidenshogun-secondary-rgb), 0.5);
}
.chat-header-main.current-chat-AI_RaidenShogun_åŸç¥ .chat-title-main {
    color: rgb(var(--gi-char-raidenshogun-secondary-rgb)); /* Electro title */
}
.message.received[data-sender-id="AI_RaidenShogun_åŸç¥"] {
    background: var(--gi-char-raidenshogun-msg-bg-dark);
    border-left: 4px solid rgb(var(--gi-char-raidenshogun-secondary-rgb));
}
.message.received[data-sender-id="AI_RaidenShogun_åŸç¥"] .message-sender {
    color: rgb(var(--gi-char-raidenshogun-secondary-rgb));
}

/* ğŸ”¥ Hu Tao - èƒ¡æ¡ƒ */
.chat-list-item.active.AI_HuTao_åŸç¥ {
    background: linear-gradient(135deg, rgb(var(--gi-char-hutao-primary-rgb)), rgb(var(--gi-char-hutao-primary-rgb)));
    color: rgb(var(--gi-char-hutao-secondary-rgb)); /* Pyro text */
    border-color: rgb(var(--gi-char-hutao-secondary-rgb));
}
.chat-list-avatar.AI_HuTao_åŸç¥ {
    border: 2px solid rgb(var(--gi-char-hutao-secondary-rgb));
    box-shadow: 0 0 8px rgba(var(--gi-char-hutao-secondary-rgb), 0.5);
}
.chat-header-main.current-chat-AI_HuTao_åŸç¥ .chat-title-main {
    color: rgb(var(--gi-char-hutao-secondary-rgb)); /* Pyro title */
}
.message.received[data-sender-id="AI_HuTao_åŸç¥"] {
    background: var(--gi-char-hutao-msg-bg-dark);
    border-left: 4px solid rgb(var(--gi-char-hutao-secondary-rgb));
}
.message.received[data-sender-id="AI_HuTao_åŸç¥"] .message-sender {
    color: rgb(var(--gi-char-hutao-secondary-rgb));
}

/* ğŸ Kazuha - æ«åŸä¸‡å¶ */
.chat-list-item.active.AI_Kazuha_åŸç¥ {
    background: linear-gradient(135deg, rgb(var(--gi-char-kazuha-primary-rgb)), rgb(var(--gi-char-kazuha-primary-rgb)));
    color: rgb(var(--gi-char-kazuha-secondary-rgb)); /* Anemo text on Maple bg */
    border-color: rgb(var(--gi-char-kazuha-secondary-rgb));
}
.chat-list-avatar.AI_Kazuha_åŸç¥ {
    border: 2px solid rgb(var(--gi-char-kazuha-secondary-rgb));
    box-shadow: 0 0 8px rgba(var(--gi-char-kazuha-secondary-rgb), 0.5);
}
.chat-header-main.current-chat-AI_Kazuha_åŸç¥ .chat-title-main {
    color: rgb(var(--gi-char-kazuha-primary-rgb)); /* Maple title */
}
.message.received[data-sender-id="AI_Kazuha_åŸç¥"] {
    background: var(--gi-char-kazuha-msg-bg-dark);
    border-left: 4px solid rgb(var(--gi-char-kazuha-secondary-rgb));
}
.message.received[data-sender-id="AI_Kazuha_åŸç¥"] .message-sender {
    color: rgb(var(--gi-char-kazuha-primary-rgb));
}

/* Common adjustments for all character details in dark mode */
.details-panel.AI_Paimon_åŸç¥ .details-name,
.details-panel.AI_Traveler_åŸç¥ .details-name,
.details-panel.AI_Zhongli_åŸç¥ .details-name,
.details-panel.AI_Venti_åŸç¥ .details-name,
.details-panel.AI_RaidenShogun_åŸç¥ .details-name,
.details-panel.AI_HuTao_åŸç¥ .details-name,
.details-panel.AI_Kazuha_åŸç¥ .details-name {
    /* Ensure good contrast for name in details panel */
}
.details-panel.AI_Paimon_åŸç¥ .details-avatar,
.details-panel.AI_Traveler_åŸç¥ .details-avatar,
.details-panel.AI_Zhongli_åŸç¥ .details-avatar,
.details-panel.AI_Venti_åŸç¥ .details-avatar,
.details-panel.AI_RaidenShogun_åŸç¥ .details-avatar,
.details-panel.AI_HuTao_åŸç¥ .details-avatar,
.details-panel.AI_Kazuha_åŸç¥ .details-avatar {
    box-shadow: 0 0 10px var(--color-shadow-glow), 0 0 5px rgba(255,255,255,0.1); /* Add a subtle white inner glow for pop */
}
.input-row{

}
#messageInput,.notification-message{
    color: black;
}
#ttsConfigFormContainer .tts-config-item label{
    color: #ccc;
}
.details-panel .details-header{
    background-color: #1b2031;
}