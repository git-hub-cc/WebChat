/*
    Theme Name: æ–—ç ´è‹ç©¹ - ç‚åŠ¨é’è² (Light Mode)
    Description: A light theme for a chat application inspired by "Battle Through the Heavens",
                 focusing on Xiao Yan's Green Lotus Core Flame and a mystical, ancient scroll aesthetic.
*/

:root {
    /* æ–—ç ´è‹ç©¹ - ç‚åŠ¨é’è² ä¸»é¢˜è‰²æ¿ (æµ…è‰²) */
    --dq-light-qinglian-flame-rgb: 70, 180, 200;      /* é’è²ä¹‹ç„° (ä¸»å¼ºè°ƒ/äº¤äº’ - Cyan Blue) */
    --dq-light-qinglian-flame: rgb(var(--dq-light-qinglian-flame-rgb));
    --dq-light-qinglian-flame-darker-rgb: 50, 150, 170;/* æ·±è²ä¹‹ç„° (æ‚¬æµ®/æ¿€æ´») */
    --dq-light-qinglian-flame-darker: rgb(var(--dq-light-qinglian-flame-darker-rgb));

    --dq-light-misty-scroll-bg-rgb: 248, 246, 240;    /* äº‘é›¾å·è½´ (èƒŒæ™¯ä¸»è‰² - Off-white parchment) */
    --dq-light-misty-scroll-bg: rgb(var(--dq-light-misty-scroll-bg-rgb));
    --dq-light-ancient-jade-panel-rgb: 253, 250, 242; /* å¤ç‰é¢æ¿ (æ¬¡çº§èƒŒæ™¯/é¢æ¿ - Very light jade/parchment) */
    --dq-light-ancient-jade-panel: rgb(var(--dq-light-ancient-jade-panel-rgb));

    --dq-light-luminous-gold-rgb: 220, 170, 50;     /* è¾‰å…‰ä¹‹é‡‘ (æ¬¡å¼ºè°ƒ/é«˜å…‰ - Bright Gold) */
    --dq-light-luminous-gold: rgb(var(--dq-light-luminous-gold-rgb));
    --dq-light-crimson-ember-rgb: 210, 90, 60;      /* èµ¤ç‚ä½™çƒ¬ (ç‚¹ç¼€/è­¦å‘Š/å±é™© - Crimson Orange) */
    --dq-light-crimson-ember: rgb(var(--dq-light-crimson-ember-rgb));

    --dq-light-soul-orchid-purple-rgb: 130, 110, 180; /* çµé­‚å…°ç´« (è¯è€/ç¥ç§˜ç‚¹ç¼€ - Soul Orchid Purple) */
    --dq-light-soul-orchid-purple: rgb(var(--dq-light-soul-orchid-purple-rgb));

    --dq-light-text-ink-black-rgb: 60, 55, 50;       /* å¢¨é»‘æ–‡å­— (ä¸»è¦æ–‡å­— - Dark Ink Brown/Black) */
    --dq-light-text-ink-black: rgb(var(--dq-light-text-ink-black-rgb));
    --dq-light-text-scroll-gray-rgb: 130, 120, 110;  /* å·è½´è¤ç° (æ¬¡è¦æ–‡å­— - Soft Brown/Gray) */
    --dq-light-text-scroll-gray: rgb(var(--dq-light-text-scroll-gray-rgb));

    --dq-light-xuan-iron-border-rgb: 200, 190, 175;  /* ç„é“è¾¹æ¡† (è¾¹æ¡† - Dark Iron Gray/Stone) */
    --dq-light-xuan-iron-border: rgb(var(--dq-light-xuan-iron-border-rgb));

    /* è§’è‰²ç‰¹å®šé¢œè‰² (æµ…è‰²) - ç‚åŠ¨é’è² */
    /* è§ç‚ - é»‘é‡‘ã€é’è²è‰²ã€ç«çº¢è‰² */
    --dq-xiaoyan-primary-light-rgb: 50, 50, 50; /* ç„é“é»‘ */
    --dq-xiaoyan-primary-light: rgb(var(--dq-xiaoyan-primary-light-rgb));
    --dq-xiaoyan-secondary-light: rgba(var(--dq-xiaoyan-primary-light-rgb), 0.1);
    --dq-xiaoyan-accent-gold-light: var(--dq-light-luminous-gold); /* è¾‰å…‰é‡‘ (é»‘é‡‘ä¹‹é‡‘) */
    --dq-xiaoyan-accent-cyan-light: var(--dq-light-qinglian-flame); /* é’è²è‰² */
    --dq-xiaoyan-accent-fire-light: var(--dq-light-crimson-ember); /* ç«çº¢è‰² */

    /* è¯è€ - é“¶ç™½ã€æ·¡ç´«ã€çµé­‚è“ */
    --dq-yaolao-primary-light-rgb: 250, 252, 255; /* é­‚ä½“é“¶ç™½ */
    --dq-yaolao-primary-light: rgb(var(--dq-yaolao-primary-light-rgb));
    --dq-yaolao-secondary-light: rgba(220, 225, 230, 0.25);
    --dq-yaolao-accent-purple-light: var(--dq-light-soul-orchid-purple); /* æ·¡ç´« */
    --dq-yaolao-accent-soulblue-light: rgb(150, 180, 225); /* çµé­‚è“ */

    /* ç¾æœèå¥³ç‹ - å¦–ç´«ã€ç«çº¢ã€æš—é‡‘ */
    --dq-medusa-primary-light-rgb: 140, 80, 160; /* å¥³ç‹å¦–ç´« */
    --dq-medusa-primary-light: rgb(var(--dq-medusa-primary-light-rgb));
    --dq-medusa-secondary-light: rgba(var(--dq-medusa-primary-light-rgb), 0.15);
    --dq-medusa-accent-rose-light: rgb(200, 70, 120); /* å¦–è‰³ç«çº¢ */
    --dq-medusa-accent-darkgold-light: rgb(180, 140, 40); /* è›‡çº¹æš—é‡‘ */

    /* äº‘éŸµ - å¤©è“ã€æ·¡é‡‘ */
    --dq-yunyun-primary-light-rgb: 130, 190, 210; /* é£éŸµå¤©è“ (åŸå¤©ç©ºé’è“) */
    --dq-yunyun-primary-light: rgb(var(--dq-yunyun-primary-light-rgb));
    --dq-yunyun-secondary-light: rgba(var(--dq-yunyun-primary-light-rgb), 0.15);
    --dq-yunyun-accent-gold-light: rgb(225, 190, 100); /* äº‘å²šæ·¡é‡‘ */

    /* çº³å…°å«£ç„¶ - æµ…ç´«ã€ç«çº¢ */
    --dq-nalan-primary-light-rgb: 190, 160, 220; /* æµ…ç©ºå ‡ç´« */
    --dq-nalan-primary-light: rgb(var(--dq-nalan-primary-light-rgb));
    --dq-nalan-secondary-light: rgba(var(--dq-nalan-primary-light-rgb), 0.15);
    --dq-nalan-accent-rose-light: rgb(220, 100, 130); /* å«£ç„¶ç«çº¢ */

    /* è§è–°å„¿ - é‡‘é»„ã€èµ¤ç„° */
    --dq-xuner-primary-light-rgb: 218, 165, 32; /* å¸ç‚é‡‘é»„ (åŸå¸ç‚é‡‘) */
    --dq-xuner-primary-light: rgb(var(--dq-xuner-primary-light-rgb));
    --dq-xuner-secondary-light: rgba(var(--dq-xuner-primary-light-rgb), 0.15);
    --dq-xuner-accent-flame-light: var(--dq-light-crimson-ember); /* å¤æ—èµ¤ç„° */

    /* é­‚æ®¿ - æ·±ç´«ã€é»‘ç„° */
    --dq-soulhall-primary-light-rgb: 100, 70, 130; /* é­‚æ®¿æ·±ç´« */
    --dq-soulhall-primary-light: rgb(var(--dq-soulhall-primary-light-rgb));
    --dq-soulhall-secondary-light: rgba(var(--dq-soulhall-primary-light-rgb), 0.1);
    --dq-soulhall-accent-blackflame-light-rgb: 70, 60, 80; /* é»‘é­”ä¹‹ç„° (æ·±ç°ç´«) */
    --dq-soulhall-accent-blackflame-light: rgb(var(--dq-soulhall-accent-blackflame-light-rgb));

    /* éŸ©æ« - æš—çº¢ã€ç°é»‘ */
    --dq-hanfeng-primary-light-rgb: 160, 50, 50; /* èƒŒå›æš—çº¢ */
    --dq-hanfeng-primary-light: rgb(var(--dq-hanfeng-primary-light-rgb));
    --dq-hanfeng-secondary-light: rgba(var(--dq-hanfeng-primary-light-rgb), 0.15);
    --dq-hanfeng-accent-grayblack-light-rgb: 80, 80, 80; /* è¯å°˜ç°é»‘ */
    --dq-hanfeng-accent-grayblack-light: rgb(var(--dq-hanfeng-accent-grayblack-light-rgb));

    /* æ—ä¿®å´– - é’ç°ã€é“ç»¿ (ç‚¼è¯å¸ˆ) */
    --dq-linxiuya-primary-light-rgb: 140, 160, 150; /* é£å½±é’ç° */
    --dq-linxiuya-primary-light: rgb(var(--dq-linxiuya-primary-light-rgb));
    --dq-linxiuya-secondary-light: rgba(var(--dq-linxiuya-primary-light-rgb), 0.15);
    --dq-linxiuya-accent-irongreen-light-rgb: 80, 120, 90; /* å¤æœ¨é“ç»¿ */
    --dq-linxiuya-accent-irongreen-light: rgb(var(--dq-linxiuya-accent-irongreen-light-rgb));

    /* å…¶ä»–è§’è‰² (ä»åŸCSSä¸­ä¿ç•™ï¼Œå¯æŒ‰éœ€è°ƒæ•´) */
    --btth-xiaoyixian-primary-light: rgb(160, 165, 150); /* å„éš¾ç°ç»¿ */
    --btth-xiaoyixian-secondary-light: rgba(160, 165, 150, 0.15);
    --btth-haibodong-primary-light: rgb(150, 200, 230); /* å†°çš‡è“ */
    --btth-haibodong-secondary-light: rgba(150, 200, 230, 0.15);
    --btth-ziyan-primary-light: rgb(190, 130, 220); /* é¾™çš‡æ™¶ç´« */
    --btth-ziyan-secondary-light: rgba(190, 130, 220, 0.15);


    /* è¦†ç›– Chat åŸæœ‰å˜é‡ */
    --primary-color: var(--dq-light-qinglian-flame);
    --primary-color-rgb: var(--dq-light-qinglian-flame-rgb); /* <<< FIXED: Added this definition */
    --primary-color-dark: var(--dq-light-qinglian-flame-darker);
    --secondary-color: var(--dq-light-ancient-jade-panel); /* åº”ç”¨ä¸»èƒŒæ™¯ */
    --text-color: var(--dq-light-text-ink-black);
    --text-color-light: var(--dq-light-text-scroll-gray);
    --text-color-inverted: var(--dq-light-misty-scroll-bg); /* é’è²è‰²æŒ‰é’®ä¸Šçš„æ–‡å­— */
    --accent-color: var(--dq-light-luminous-gold);
    --danger-color: var(--dq-light-crimson-ember);
    --warning-color: #D4AC0D; /* æš—é‡‘è­¦å‘Š - ä¿ç•™æˆ–è°ƒæ•´ä¸ºä¸»é¢˜è‰² */

    --sent-bg-color: rgba(var(--dq-light-qinglian-flame-rgb), 0.1); /* å‘é€æ¶ˆæ¯ - æ·¡é’è²åº• */
    --received-bg-color: rgba(var(--dq-light-misty-scroll-bg-rgb), 0.9); /* æ¥æ”¶æ¶ˆæ¯ - äº‘é›¾å·è½´ */

    --border-color: rgba(var(--dq-light-xuan-iron-border-rgb), 0.7);
    --hover-bg-color: rgba(var(--dq-light-qinglian-flame-rgb), 0.07);
    --active-bg-color: rgba(var(--dq-light-qinglian-flame-rgb), 0.18);
    --border-radius: 5px; /* ç»Ÿä¸€åœ†è§’ */
    --font-family: "LXGW WenKai TC", "STKaiti", "SimSun", "Noto Serif SC", "Songti SC", serif;
    --box-shadow: 0 2px 5px rgba(var(--dq-light-text-ink-black-rgb),0.1), 0 0 12px rgba(var(--dq-light-qinglian-flame-rgb),0.08) inset;
    --special-contact-color: var(--dq-xiaoyan-primary-light); /* é»˜è®¤è§ç‚é»‘ */
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
    font-family: var(--font-family), serif;
    background-color: var(--dq-light-misty-scroll-bg); /* æœ€åº•å±‚èƒŒæ™¯ */
    color: var(--text-color);
    line-height: 1.6;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    /* æ·¡é›¾è“ + æµå…‰ç°æ¸å˜ -> é’è²æ°”æ¯ + å¤å·è´¨æ„Ÿ */
    background:
            linear-gradient(135deg, rgba(var(--dq-light-misty-scroll-bg-rgb),0.95), rgba(var(--dq-light-ancient-jade-panel-rgb),0.85)),
            radial-gradient(ellipse at top left, rgba(var(--dq-light-qinglian-flame-rgb),0.15) 0%, transparent 60%),
            radial-gradient(ellipse at bottom right, rgba(var(--dq-light-luminous-gold-rgb),0.1) 0%, transparent 70%);
    background-blend-mode: normal, soft-light, soft-light;
}

.app-container {
    display: flex;
    /* ç„å†°çŸ³å£æˆ–æ–—æŠ€å°é‡‘çº¹ -> å¤ç‰é¢æ¿ï¼Œå¢åŠ é“­æ–‡æ„Ÿè¾¹æ¡† */
    background-color: var(--secondary-color);
    border-radius: var(--border-radius);
    border: 1px solid rgba(var(--dq-light-xuan-iron-border-rgb), 0.6);
    box-shadow: 0 5px 25px rgba(var(--dq-light-text-ink-black-rgb),0.15),
    0 0 0 3px rgba(var(--dq-light-luminous-gold-rgb), 0.2); /* é‡‘çº¹å¾®å…‰ */
    overflow: hidden;
}

/* --- æ»šåŠ¨æ¡ç¾åŒ– (é­‚æ®¿å¯†çº¹é£æ ¼) --- */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track {
    background: rgba(var(--dq-light-ancient-jade-panel-rgb), 0.5);
    border-radius: var(--border-radius);
    border: 1px solid rgba(var(--dq-light-xuan-iron-border-rgb), 0.2);
}
::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, var(--dq-light-qinglian-flame), var(--dq-light-soul-orchid-purple));
    border-radius: var(--border-radius);
    border: 1px solid rgba(var(--dq-light-text-ink-black-rgb), 0.1);
}
::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, var(--dq-light-qinglian-flame-darker), rgba(var(--dq-light-soul-orchid-purple-rgb),0.7));
}

/* --- Sidebar Navigation (ç„å²©é»‘æˆ–äº‘é›¾ç™½) --- */
.sidebar-nav {
    background-color: rgba(var(--dq-light-ancient-jade-panel-rgb), 0.8); /* äº‘é›¾ç™½æ„Ÿ */
    border-right: 1px solid var(--border-color);
    position: relative;
    box-shadow: 1px 0 5px rgba(var(--dq-light-text-ink-black-rgb), 0.05);
}
.sidebar-header {
    background-color: rgba(var(--dq-light-misty-scroll-bg-rgb), 0.7);
    border-bottom: 1px solid var(--border-color);
}
.menu-btn { color: var(--text-color-light); }
.menu-btn:hover { color: var(--primary-color); }

/* æœç´¢æ¡†æ·»åŠ ç‚¼è¯ç¬¦å°å›¾æ¡ˆ (æ„å¢ƒ) */
.search-bar {
    background-color: rgba(var(--dq-light-misty-scroll-bg-rgb), 0.9);
    border: 1px solid var(--border-color);
    color: var(--text-color);
    border-radius: var(--border-radius);
    padding: 8px 12px 8px 30px; /* Space for pseudo icon */
    position: relative;
}
.search-bar::before { /* ç‚¼è¯ç¬¦å°/æœç´¢å›¾æ ‡æ„å¢ƒ */
    content: "ä¸¹"; /* æˆ– 'ğŸ”' */
    font-family: 'Times New Roman', serif; /* Or a more stylized font if available */
    position: absolute;
    left: 10px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-color-light);
    font-size: 0.9em;
    opacity: 0.7;
}
.search-bar::placeholder { color: var(--text-color-light); }
.search-bar:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(var(--dq-light-qinglian-flame-rgb),0.2),
    0 0 5px rgba(var(--dq-light-luminous-gold-rgb),0.1) inset;
}
.search-bar:focus::before {
    color: var(--primary-color);
}

.nav-tabs { border-bottom: 1px solid var(--border-color); }
.nav-tab { color: var(--text-color-light); }
.nav-tab:hover { color: var(--primary-color); }
.nav-tab.active {
    color: var(--primary-color);
    border-bottom: 2px solid var(--primary-color);
    font-weight: 600;
    background-image: linear-gradient(to top, rgba(var(--dq-light-qinglian-flame-rgb), 0.05), transparent);
}

/* ç«ç„°æ‚¬æµ®é«˜äº®æ•ˆæœ */
.chat-list-item {
    border-bottom: 1px solid var(--border-color);
    transition: background-color 0.2s ease, box-shadow 0.2s ease;
}
.chat-list-item:hover {
    background-color: var(--hover-bg-color);
    box-shadow: inset 3px 0 0 0 var(--dq-light-luminous-gold); /* é‡‘è‰²ç«ç„°é«˜å…‰ */
}
.chat-list-item.active {
    background-color: var(--active-bg-color);
    box-shadow: inset 3px 0 0 0 var(--primary-color), /* é’è²ä¸»è‰² */
    0 0 10px rgba(var(--dq-light-qinglian-flame-rgb), 0.15) inset; /* å†…éƒ¨è¾‰å…‰ */
}
.chat-list-item.active .chat-list-name { color: var(--primary-color-dark); font-weight: bold; }

/* è§’è‰²æ°”æ¯ç¯ç»•é£æ ¼ */
.chat-list-avatar {
    background-color: var(--dq-light-xuan-iron-border);
    font-family: "LXGW WenKai TC", serif;
    border: 2px solid transparent; /* Base for aura */
    color: var(--dq-light-text-ink-black);
    box-shadow: 0 0 3px rgba(var(--dq-light-text-ink-black-rgb), 0.2);
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
}
.chat-list-item:hover .chat-list-avatar {
    border-color: rgba(var(--dq-light-luminous-gold-rgb), 0.5);
    box-shadow: 0 0 5px rgba(var(--dq-light-luminous-gold-rgb), 0.3);
}
.chat-list-item.active .chat-list-avatar {
    border-color: var(--primary-color);
    box-shadow: 0 0 6px rgba(var(--dq-light-qinglian-flame-rgb), 0.4);
}

/* çµé­‚åŠ›é—ªçƒæ ·å¼æé†’ */
.chat-list-badge {
    background-color: var(--dq-light-crimson-ember);
    color: var(--dq-light-misty-scroll-bg);
    box-shadow: 0 0 6px rgba(var(--dq-light-crimson-ember-rgb), 0.7);
    animation: dq-soul-pulse 1.8s infinite ease-in-out;
    border: 1px solid rgba(var(--dq-light-misty-scroll-bg-rgb),0.5);
}
@keyframes dq-soul-pulse {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.1); opacity: 0.8; }
}

.new-chat-fab {
    background: linear-gradient(135deg, var(--dq-light-qinglian-flame), var(--dq-light-luminous-gold));
    color: var(--dq-light-text-ink-black);
    box-shadow: 0 2px 8px rgba(var(--dq-light-text-ink-black-rgb),0.25),
    0 0 10px rgba(var(--dq-light-qinglian-flame-rgb),0.3),
    0 0 8px rgba(var(--dq-light-luminous-gold-rgb),0.2);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.new-chat-fab:hover {
    background: linear-gradient(135deg, var(--dq-light-qinglian-flame-darker), var(--dq-light-luminous-gold));
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(var(--dq-light-text-ink-black-rgb),0.3),
    0 0 15px rgba(var(--dq-light-qinglian-flame-rgb),0.4),
    0 0 12px rgba(var(--dq-light-luminous-gold-rgb),0.3);
}

/* --- Main Chat Area (æ–—æ°”ç»“ç•Œæˆ–é­‚ç©ºé—´æ„Ÿ) --- */
.chat-area {
    background-color: var(--secondary-color); /* Already good, perhaps subtle pattern */
    /* Potential: use ::before for a very subtle texture/pattern overlay */
}
/* é¡¶éƒ¨åŠ å…¥æ–—æ°”é“­çº¹çº¿æ¡ */
.chat-header-main {
    background-color: rgba(var(--dq-light-misty-scroll-bg-rgb), 0.5);
    border-bottom: 1px solid var(--border-color);
    position: relative;
}
.chat-header-main::after { /* æ–—æ°”é“­çº¹çº¿æ¡ */
    content: '';
    position: absolute;
    bottom: -1px; /* Overlap border */
    left: 50%;
    transform: translateX(-50%);
    width: 30%;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
    opacity: 0.7;
}
.chat-avatar-main {
    border: 2px solid var(--dq-light-xuan-iron-border);
    box-shadow: 0 1px 4px rgba(var(--dq-light-text-ink-black-rgb), 0.15);
}
.chat-title-main {
    font-weight: 600;
    text-shadow: 0 0 8px rgba(var(--dq-light-qinglian-flame-rgb), 0.15);
}
.header-action-btn { color: var(--text-color-light); }
.header-action-btn:hover {
    color: var(--primary-color);
    text-shadow: 0 0 5px rgba(var(--dq-light-qinglian-flame-rgb), 0.5);
}

.chat-messages-container { padding: 15px; }

/* Placeholder: ğŸ”¥ã€ğŸŒŒ æˆ–â€œç‚â€å­— Logo -> ç”¨â€œé¼â€å­—ï¼Œä»£è¡¨ç‚¼è¯/åˆå§‹ */
.no-chat-selected .logo-placeholder {
    font-family: "LXGW WenKai TC", serif;
    font-size: 8em;
    font-weight: bold;
    color: rgba(var(--dq-light-qinglian-flame-rgb), 0.25);
    text-shadow: 0 0 10px rgba(var(--dq-light-luminous-gold-rgb),0.2),
    2px 2px 2px rgba(var(--dq-light-xuan-iron-border-rgb),0.5);
    /* For specific character, you can use "ç‚", "è²", "ä¸¹" */
}
.no-chat-selected .logo-placeholder::before {
}
.status-indicator.global {
    background-color: rgba(var(--dq-light-misty-scroll-bg-rgb), 0.6);
    border: 1px solid var(--border-color);
    color: var(--primary-color);
    box-shadow: 0 0 5px rgba(var(--primary-color-rgb),0.2); /* Uses --primary-color-rgb */
}

/* æ¶ˆæ¯æ°”æ³¡ - å¯åŠ ä¸€è§’ç«ç„°ç¾½çº¹ (subtle border effect) */
.message {
    border: 1px solid var(--border-color);
    box-shadow: var(--box-shadow);
    border-radius: var(--border-radius) var(--border-radius) var(--border-radius) var(--border-radius); /* Default */
    position: relative;
    padding: 10px 15px;
}
/* é’è²ç«ã€ç´«ç„°çº¹åŒ…å›´ */
.message.sent {
    background-color: var(--sent-bg-color);
    border-left: 3px solid var(--primary-color);
    color: var(--text-color);
    border-radius: var(--border-radius) 0px var(--border-radius) var(--border-radius); /* ç¾½çº¹è§’ */
}
.message.sent::after { /* Subtle flame trail */
    content: '';
    position: absolute;
    top: 0;
    left: -1px;
    bottom: 0;
    width: 5px;
    background: linear-gradient(to bottom, rgba(var(--dq-light-qinglian-flame-rgb),0.3) 0%, rgba(var(--dq-light-luminous-gold-rgb),0.2) 70%, transparent 100%);
    border-radius: 3px 0 0 3px;
    opacity: 0.6;
}
/* è§’è‰²ä¸“å±æ–—æ°”è‰² */
.message.received {
    background-color: var(--received-bg-color);
    border-right: 3px solid var(--dq-light-xuan-iron-border); /* Default, overridden by character */
    color: var(--text-color);
    border-radius: 0px var(--border-radius) var(--border-radius) var(--border-radius); /* ç¾½çº¹è§’ */
}
/* ç„ç¬¦åˆ»çº¹æ ·å¼ */
.message.system {
    background-color: rgba(var(--dq-light-ancient-jade-panel-rgb), 0.9);
    color: var(--dq-light-luminous-gold);
    font-style: italic;
    border: 1px dashed var(--dq-light-luminous-gold);
    box-shadow: 0 0 8px rgba(var(--dq-light-luminous-gold-rgb),0.15) inset,
    0 1px 2px rgba(var(--dq-light-text-ink-black-rgb), 0.05);
    text-align: center;
}
.message-sender {
    color: var(--text-color-light);
    font-weight: 600; /* Bolder sender name */
    margin-bottom: 4px;
    display: block;
}
.message .timestamp { color: var(--text-color-light); opacity: 0.75; font-size: 0.8em; }

/* è¾“å…¥åŒº - è¾¹æ¡†å¦‚æ–—æŠ€å°é‡‘è¾¹ */
.chat-input-container {
    background-color: rgba(var(--dq-light-misty-scroll-bg-rgb), 0.6);
    border-top: 1px solid var(--border-color);
    padding: 10px;
    box-shadow: 0 -1px 3px rgba(var(--dq-light-text-ink-black-rgb),0.03);
}
#messageInput {
    background-color: var(--dq-light-ancient-jade-panel);
    border: 1px solid var(--dq-light-xuan-iron-border);
    color: var(--text-color);
    border-radius: var(--border-radius);
    padding: 10px;
    box-shadow: inset 0 1px 3px rgba(var(--dq-light-text-ink-black-rgb),0.05);
}
#messageInput::placeholder { color: var(--text-color-light); }
#messageInput:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(var(--dq-light-qinglian-flame-rgb),0.25),
    inset 0 1px 4px rgba(var(--dq-light-qinglian-flame-rgb),0.1);
}
.icon-btn { color: var(--text-color-light); transition: color 0.2s, background-color 0.2s; }
.icon-btn:hover {
    color: var(--primary-color);
    background-color: rgba(var(--dq-light-qinglian-flame-rgb),0.08);
}
/* å‘é€æŒ‰é’®ä¸ºç‡ƒçƒ§æ–—æ°”é£æ ¼ï¼Œæ‚¬æµ®æ—¶å‡è…¾å…‰ç„° */
#sendButtonMain {
    color: var(--primary-color);
    font-weight: 600;
    transition: text-shadow 0.2s ease;
}
#sendButtonMain:hover {
    color: var(--primary-color-dark);
    text-shadow: 0 0 6px rgba(var(--dq-light-qinglian-flame-rgb), 0.7),
    0 0 10px rgba(var(--dq-light-luminous-gold-rgb),0.4); /* å‡è…¾å…‰ç„° */
}
#voiceButtonMain.recording {
    color: var(--danger-color);
    animation: dq-light-flame-pulse 1.5s infinite;
}
@keyframes dq-light-flame-pulse {
    0% { box-shadow: 0 0 0 0 rgba(var(--dq-light-crimson-ember-rgb), 0.6); }
    70% { box-shadow: 0 0 0 12px rgba(var(--dq-light-crimson-ember-rgb), 0); }
    100% { box-shadow: 0 0 0 0 rgba(var(--dq-light-crimson-ember-rgb), 0); }
}

/* --- Details Panel (ç„é‡‘æˆ–å†°è“) --- */
.details-panel {
    background-color: rgba(var(--dq-light-misty-scroll-bg-rgb), 0.8); /* ç„é‡‘æ„å¢ƒ */
    border-left: 1px solid var(--border-color);
    box-shadow: -1px 0 5px rgba(var(--dq-light-text-ink-black-rgb), 0.05);
}
.details-header {
    background-color: rgba(var(--dq-light-ancient-jade-panel-rgb), 0.6);
    border-bottom: 1px solid var(--border-color);
}
/* è§’è‰²ä¿¡æ¯å±•ç¤ºæ–—æ°”åŠ¨æ€è¾¹æ¡† */
.details-avatar {
    border: 3px solid transparent; /* Base for dynamic border */
    box-shadow: 0 0 10px rgba(var(--dq-light-text-ink-black-rgb), 0.1);
    transition: border-color 0.4s ease, box-shadow 0.4s ease;
    /* Default aura */
    border-image: linear-gradient(45deg, var(--dq-light-luminous-gold), var(--dq-light-xuan-iron-border)) 1;
}
.details-panel.character-active .details-avatar { /* Placeholder, actual character class will override */
    animation: dq-douqi-border-glow 3s infinite alternate;
}
@keyframes dq-douqi-border-glow {
    from { border-image: linear-gradient(45deg, var(--dq-light-luminous-gold), var(--primary-color)) 1; box-shadow: 0 0 12px rgba(var(--dq-light-luminous-gold-rgb),0.3); }
    to { border-image: linear-gradient(45deg, var(--primary-color), var(--dq-light-luminous-gold)) 1; box-shadow: 0 0 18px rgba(var(--primary-color-rgb),0.4); } /* Uses --primary-color-rgb */
}

#detailsName {
    text-shadow: 0 1px 2px rgba(var(--dq-light-text-ink-black-rgb), 0.15);
    font-weight: 700;
}
#aiContactDetailsContent {
    background-color: rgba(var(--dq-light-ancient-jade-panel-rgb), 0.5);
    border: 1px solid rgba(var(--dq-light-xuan-iron-border-rgb), 0.3);
    border-radius: var(--border-radius);
    padding: 15px;
    margin: 10px;
}
#aiContactDetailsContent p strong {
    color: var(--primary-color);
    border-bottom: 1px solid rgba(var(--primary-color-rgb), 0.25); /* Uses --primary-color-rgb */
    padding-bottom: 1px;
}
#aiContactBasicInfoList li {
    border-bottom: 1px dotted rgba(var(--dq-light-text-ink-black-rgb), 0.15);
    padding: 8px 0;
}
#aiContactAboutText { color: var(--text-color-light); font-size: 0.9em; line-height: 1.7; }


/* --- è§’è‰²ç‰¹å®šæ ·å¼ (æµ…è‰² - ç‚åŠ¨é’è²) --- */

/* ğŸ’ è§ç‚ - é»‘é‡‘ã€é’è²ã€ç«çº¢ ğŸ’ */
.chat-list-item.special-contact.AI_è§ç‚_æ–—ç ´è‹ç©¹ .chat-list-avatar,
.chat-avatar-main.AI_è§ç‚_æ–—ç ´è‹ç©¹, .details-avatar.AI_è§ç‚_æ–—ç ´è‹ç©¹, #callingModalAvatar.AI_è§ç‚_æ–—ç ´è‹ç©¹ {
    background-color: var(--dq-xiaoyan-primary-light);
    color: var(--dq-xiaoyan-accent-gold-light);
    border-color: var(--dq-xiaoyan-accent-cyan-light);
    box-shadow: 0 0 6px var(--dq-xiaoyan-accent-cyan-light), 0 0 3px var(--dq-xiaoyan-accent-gold-light) inset;
    text-shadow: 0 0 3px var(--dq-xiaoyan-accent-gold-light);
}
.chat-list-item.active.AI_è§ç‚_æ–—ç ´è‹ç©¹ {
    background-color: var(--dq-xiaoyan-secondary-light);
    box-shadow: inset 3px 0 0 0 var(--dq-xiaoyan-accent-fire-light),
    0 0 10px rgba(var(--dq-xiaoyan-primary-light-rgb), 0.3) inset;
}
.chat-list-item.active.AI_è§ç‚_æ–—ç ´è‹ç©¹ .chat-list-name { color: var(--dq-xiaoyan-accent-fire-light); }
.chat-header-main.current-chat-AI_è§ç‚_æ–—ç ´è‹ç©¹ .chat-title-main {
    color: var(--dq-xiaoyan-primary-light);
    text-shadow: 0 0 3px var(--dq-xiaoyan-accent-cyan-light), 0 0 5px var(--dq-xiaoyan-accent-gold-light);
}
.message.received[data-sender-id="AI_è§ç‚_æ–—ç ´è‹ç©¹"] {
    border-right-color: var(--dq-xiaoyan-accent-cyan-light);
    background-color: rgba(var(--dq-xiaoyan-primary-light-rgb), 0.03); /* Subtle dark backing */
}
.message.received[data-sender-id="AI_è§ç‚_æ–—ç ´è‹ç©¹"] .message-sender { color: var(--dq-xiaoyan-accent-fire-light); }
.details-panel.AI_è§ç‚_æ–—ç ´è‹ç©¹ #detailsName { color: var(--dq-xiaoyan-accent-fire-light); }
.details-panel.AI_è§ç‚_æ–—ç ´è‹ç©¹ .details-avatar.AI_è§ç‚_æ–—ç ´è‹ç©¹ {
    border-image: linear-gradient(45deg, var(--dq-xiaoyan-accent-gold-light), var(--dq-xiaoyan-accent-cyan-light), var(--dq-xiaoyan-accent-fire-light)) 1;
    animation-name: dq-xiaoyan-border-glow;
}
@keyframes dq-xiaoyan-border-glow {
    from { border-image: linear-gradient(45deg, var(--dq-xiaoyan-accent-gold-light), var(--dq-xiaoyan-accent-cyan-light)) 1; }
    to { border-image: linear-gradient(45deg, var(--dq-xiaoyan-accent-cyan-light), var(--dq-xiaoyan-accent-fire-light)) 1; }
}
.details-panel.AI_è§ç‚_æ–—ç ´è‹ç©¹ #aiContactAboutSection h4 span { color: var(--dq-xiaoyan-accent-cyan-light); }


/* ğŸ“œ è¯è€ - é“¶ç™½ã€æ·¡ç´«ã€çµé­‚è“ ğŸ“œ */
.chat-list-item.special-contact.AI_è¯è€_æ–—ç ´è‹ç©¹ .chat-list-avatar,
.chat-avatar-main.AI_è¯è€_æ–—ç ´è‹ç©¹, .details-avatar.AI_è¯è€_æ–—ç ´è‹ç©¹, #callingModalAvatar.AI_è¯è€_æ–—ç ´è‹ç©¹ {
    background-color: var(--dq-yaolao-primary-light);
    color: var(--dq-yaolao-accent-purple-light);
    border-color: var(--dq-yaolao-accent-soulblue-light);
    box-shadow: 0 0 7px var(--dq-yaolao-accent-soulblue-light), 0 0 4px rgba(var(--dq-light-soul-orchid-purple-rgb),0.5) inset; /* Uses defined RGB */
    text-shadow: 0 0 2px var(--dq-yaolao-accent-purple-light);
}
.chat-list-item.active.AI_è¯è€_æ–—ç ´è‹ç©¹ {
    background-color: var(--dq-yaolao-secondary-light);
    box-shadow: inset 3px 0 0 0 var(--dq-yaolao-accent-purple-light),
    0 0 10px rgba(150, 180, 225, 0.2) inset; /* Directly use RGB values for soulblue-light */
}
.chat-list-item.active.AI_è¯è€_æ–—ç ´è‹ç©¹ .chat-list-name { color: var(--dq-yaolao-accent-purple-light); }
.chat-header-main.current-chat-AI_è¯è€_æ–—ç ´è‹ç©¹ .chat-title-main { color: var(--dq-yaolao-accent-soulblue-light); }
.message.received[data-sender-id="AI_è¯è€_æ–—ç ´è‹ç©¹"] {
    border-right-color: var(--dq-yaolao-accent-soulblue-light);
    background-color: rgba(var(--dq-light-soul-orchid-purple-rgb), 0.05); /* Uses defined RGB */
}
.message.received[data-sender-id="AI_è¯è€_æ–—ç ´è‹ç©¹"] .message-sender { color: var(--dq-yaolao-accent-purple-light); }
.details-panel.AI_è¯è€_æ–—ç ´è‹ç©¹ #detailsName { color: var(--dq-yaolao-accent-purple-light); }
.details-panel.AI_è¯è€_æ–—ç ´è‹ç©¹ .details-avatar.AI_è¯è€_æ–—ç ´è‹ç©¹ {
    border-image: linear-gradient(60deg, var(--dq-yaolao-accent-soulblue-light), var(--dq-yaolao-accent-purple-light), var(--dq-light-misty-scroll-bg)) 1;
}
.details-panel.AI_è¯è€_æ–—ç ´è‹ç©¹ #aiContactAboutSection h4 span { color: var(--dq-yaolao-accent-soulblue-light); }


/* ğŸ ç¾æœèå¥³ç‹ - å¦–ç´«ã€ç«çº¢ã€æš—é‡‘ ğŸ */
.chat-list-item.special-contact.AI_ç¾æœè_æ–—ç ´è‹ç©¹ .chat-list-avatar,
.chat-avatar-main.AI_ç¾æœè_æ–—ç ´è‹ç©¹, .details-avatar.AI_ç¾æœè_æ–—ç ´è‹ç©¹, #callingModalAvatar.AI_ç¾æœè_æ–—ç ´è‹ç©¹ {
    background-color: var(--dq-medusa-primary-light);
    color: var(--dq-medusa-accent-darkgold-light);
    border-color: var(--dq-medusa-accent-rose-light);
    text-shadow: 0 0 3px var(--dq-medusa-accent-darkgold-light);
}
.chat-list-item.active.AI_ç¾æœè_æ–—ç ´è‹ç©¹ {
    background-color: var(--dq-medusa-secondary-light);
    box-shadow: inset 3px 0 0 0 var(--dq-medusa-accent-rose-light),
    0 0 10px rgba(var(--dq-medusa-primary-light-rgb),0.3) inset;
}
.chat-list-item.active.AI_ç¾æœè_æ–—ç ´è‹ç©¹ .chat-list-name { color: var(--dq-medusa-primary-light); }
.chat-header-main.current-chat-AI_ç¾æœè_æ–—ç ´è‹ç©¹ .chat-title-main { color: var(--dq-medusa-primary-light); text-shadow: 0 0 4px var(--dq-medusa-accent-rose-light); }
.message.received[data-sender-id="AI_ç¾æœè_æ–—ç ´è‹ç©¹"] {
    border-right-color: var(--dq-medusa-primary-light);
    background-color: rgba(var(--dq-medusa-primary-light-rgb),0.07);
}
.message.received[data-sender-id="AI_ç¾æœè_æ–—ç ´è‹ç©¹"] .message-sender { color: var(--dq-medusa-accent-rose-light); }
.details-panel.AI_ç¾æœè_æ–—ç ´è‹ç©¹ #detailsName { color: var(--dq-medusa-primary-light); }
.details-panel.AI_ç¾æœè_æ–—ç ´è‹ç©¹ .details-avatar.AI_ç¾æœè_æ–—ç ´è‹ç©¹ {
    border-image: linear-gradient(45deg, var(--dq-medusa-accent-darkgold-light), var(--dq-medusa-accent-rose-light), var(--dq-medusa-primary-light)) 1;
    animation-name: dq-medusa-border-glow;
}
@keyframes dq-medusa-border-glow {
    from { filter: brightness(1); }
    to { filter: brightness(1.1) saturate(1.2); }
}
.details-panel.AI_ç¾æœè_æ–—ç ´è‹ç©¹ #aiContactAboutSection h4 span, .details-panel.AI_ç¾æœè_æ–—ç ´è‹ç©¹ #detailsName { color: var(--dq-medusa-primary-light); }


/* â˜ï¸ äº‘éŸµ - å¤©è“ã€æ·¡é‡‘ â˜ï¸ */
.chat-list-item.special-contact.AI_äº‘éŸµ_æ–—ç ´è‹ç©¹ .chat-list-avatar,
.chat-avatar-main.AI_äº‘éŸµ_æ–—ç ´è‹ç©¹, .details-avatar.AI_äº‘éŸµ_æ–—ç ´è‹ç©¹, #callingModalAvatar.AI_äº‘éŸµ_æ–—ç ´è‹ç©¹ {
    background-color: var(--dq-yunyun-primary-light);
    color: var(--dq-light-text-ink-black);
    border-color: var(--dq-yunyun-accent-gold-light);
}
.chat-list-item.active.AI_äº‘éŸµ_æ–—ç ´è‹ç©¹ {
    background-color: var(--dq-yunyun-secondary-light);
    box-shadow: inset 3px 0 0 0 var(--dq-yunyun-accent-gold-light),
    0 0 10px rgba(var(--dq-yunyun-primary-light-rgb),0.25) inset;
}
.chat-list-item.active.AI_äº‘éŸµ_æ–—ç ´è‹ç©¹ .chat-list-name { color: var(--dq-yunyun-primary-light); }
.chat-header-main.current-chat-AI_äº‘éŸµ_æ–—ç ´è‹ç©¹ .chat-title-main { color: var(--dq-yunyun-primary-light); text-shadow: 0 0 3px var(--dq-yunyun-accent-gold-light); }
.message.received[data-sender-id="AI_äº‘éŸµ_æ–—ç ´è‹ç©¹"] {
    border-right-color: var(--dq-yunyun-primary-light);
    background-color: rgba(var(--dq-yunyun-primary-light-rgb),0.08);
}
.message.received[data-sender-id="AI_äº‘éŸµ_æ–—ç ´è‹ç©¹"] .message-sender { color: var(--dq-yunyun-primary-light); }
.details-panel.AI_äº‘éŸµ_æ–—ç ´è‹ç©¹ #detailsName { color: var(--dq-yunyun-primary-light); }
.details-panel.AI_äº‘éŸµ_æ–—ç ´è‹ç©¹ .details-avatar.AI_äº‘éŸµ_æ–—ç ´è‹ç©¹ {
    border-image: linear-gradient(45deg, var(--dq-yunyun-accent-gold-light), var(--dq-yunyun-primary-light)) 1;
}
.details-panel.AI_äº‘éŸµ_æ–—ç ´è‹ç©¹ #aiContactAboutSection h4 span { color: var(--dq-yunyun-accent-gold-light); }


/* ğŸŒ¸ çº³å…°å«£ç„¶ - æµ…ç´«ã€ç«çº¢ ğŸŒ¸ */
.chat-list-item.special-contact.AI_çº³å…°å«£ç„¶_æ–—ç ´è‹ç©¹ .chat-list-avatar,
.chat-avatar-main.AI_çº³å…°å«£ç„¶_æ–—ç ´è‹ç©¹, .details-avatar.AI_çº³å…°å«£ç„¶_æ–—ç ´è‹ç©¹, #callingModalAvatar.AI_çº³å…°å«£ç„¶_æ–—ç ´è‹ç©¹ {
    background-color: var(--dq-nalan-primary-light);
    color: var(--dq-light-text-ink-black);
    border-color: var(--dq-nalan-accent-rose-light);
}
.chat-list-item.active.AI_çº³å…°å«£ç„¶_æ–—ç ´è‹ç©¹ {
    background-color: var(--dq-nalan-secondary-light);
    box-shadow: inset 3px 0 0 0 var(--dq-nalan-accent-rose-light),
    0 0 10px rgba(var(--dq-nalan-primary-light-rgb),0.25) inset;
}
.chat-list-item.active.AI_çº³å…°å«£ç„¶_æ–—ç ´è‹ç©¹ .chat-list-name { color: var(--dq-nalan-primary-light); }
.chat-header-main.current-chat-AI_çº³å…°å«£ç„¶_æ–—ç ´è‹ç©¹ .chat-title-main { color: var(--dq-nalan-primary-light); text-shadow: 0 0 3px var(--dq-nalan-accent-rose-light); }
.message.received[data-sender-id="AI_çº³å…°å«£ç„¶_æ–—ç ´è‹ç©¹"] {
    border-right-color: var(--dq-nalan-primary-light);
    background-color: rgba(var(--dq-nalan-primary-light-rgb),0.08);
}
.message.received[data-sender-id="AI_çº³å…°å«£ç„¶_æ–—ç ´è‹ç©¹"] .message-sender { color: var(--dq-nalan-accent-rose-light); }
.details-panel.AI_çº³å…°å«£ç„¶_æ–—ç ´è‹ç©¹ #detailsName { color: var(--dq-nalan-primary-light); }
.details-panel.AI_çº³å…°å«£ç„¶_æ–—ç ´è‹ç©¹ .details-avatar.AI_çº³å…°å«£ç„¶_æ–—ç ´è‹ç©¹ {
    border-image: linear-gradient(45deg, var(--dq-nalan-accent-rose-light), var(--dq-nalan-primary-light)) 1;
}
.details-panel.AI_çº³å…°å«£ç„¶_æ–—ç ´è‹ç©¹ #aiContactAboutSection h4 span { color: var(--dq-nalan-accent-rose-light); }


/* ğŸ”¥ è§è–°å„¿ - é‡‘é»„ã€èµ¤ç„° ğŸ”¥ */
.chat-list-item.special-contact.AI_è§è–°å„¿_æ–—ç ´è‹ç©¹ .chat-list-avatar,
.chat-avatar-main.AI_è§è–°å„¿_æ–—ç ´è‹ç©¹, .details-avatar.AI_è§è–°å„¿_æ–—ç ´è‹ç©¹, #callingModalAvatar.AI_è§è–°å„¿_æ–—ç ´è‹ç©¹ {
    background-color: var(--dq-xuner-primary-light);
    color: var(--dq-light-text-ink-black);
    border-color: var(--dq-xuner-accent-flame-light);
    text-shadow: 0 0 2px var(--dq-light-text-ink-black);
}
.chat-list-item.active.AI_è§è–°å„¿_æ–—ç ´è‹ç©¹ {
    background-color: var(--dq-xuner-secondary-light);
    box-shadow: inset 3px 0 0 0 var(--dq-xuner-accent-flame-light),
    0 0 10px rgba(var(--dq-xuner-primary-light-rgb),0.3) inset;
}
.chat-list-item.active.AI_è§è–°å„¿_æ–—ç ´è‹ç©¹ .chat-list-name { color: var(--dq-xuner-primary-light); }
.chat-header-main.current-chat-AI_è§è–°å„¿_æ–—ç ´è‹ç©¹ .chat-title-main { color: var(--dq-xuner-primary-light); text-shadow: 0 0 4px var(--dq-xuner-accent-flame-light); }
.message.received[data-sender-id="AI_è§è–°å„¿_æ–—ç ´è‹ç©¹"] {
    border-right-color: var(--dq-xuner-primary-light);
    background-color: rgba(var(--dq-xuner-primary-light-rgb),0.07);
}
.message.received[data-sender-id="AI_è§è–°å„¿_æ–—ç ´è‹ç©¹"] .message-sender { color: var(--dq-xuner-accent-flame-light); }
.details-panel.AI_è§è–°å„¿_æ–—ç ´è‹ç©¹ #detailsName { color: var(--dq-xuner-primary-light); }
.details-panel.AI_è§è–°å„¿_æ–—ç ´è‹ç©¹ .details-avatar.AI_è§è–°å„¿_æ–—ç ´è‹ç©¹ {
    border-image: linear-gradient(45deg, var(--dq-xuner-accent-flame-light), var(--dq-xuner-primary-light)) 1;
}
.details-panel.AI_è§è–°å„¿_æ–—ç ´è‹ç©¹ #aiContactAboutSection h4 span { color: var(--dq-xuner-accent-flame-light); }


/* ğŸ’€ é­‚æ®¿ - æ·±ç´«ã€é»‘ç„° ğŸ’€ */
.chat-list-item.special-contact.AI_é­‚æ®¿_æ–—ç ´è‹ç©¹ .chat-list-avatar,
.chat-avatar-main.AI_é­‚æ®¿_æ–—ç ´è‹ç©¹, .details-avatar.AI_é­‚æ®¿_æ–—ç ´è‹ç©¹, #callingModalAvatar.AI_é­‚æ®¿_æ–—ç ´è‹ç©¹ {
    background-color: var(--dq-soulhall-primary-light);
    color: var(--dq-light-misty-scroll-bg);
    border-color: var(--dq-soulhall-accent-blackflame-light);
    text-shadow: 0 0 3px var(--dq-light-misty-scroll-bg);
}
.chat-list-item.active.AI_é­‚æ®¿_æ–—ç ´è‹ç©¹ {
    background-color: var(--dq-soulhall-secondary-light);
    box-shadow: inset 3px 0 0 0 var(--dq-soulhall-accent-blackflame-light),
    0 0 10px rgba(var(--dq-soulhall-primary-light-rgb),0.3) inset;
}
.chat-list-item.active.AI_é­‚æ®¿_æ–—ç ´è‹ç©¹ .chat-list-name { color: var(--dq-soulhall-primary-light); }
.chat-header-main.current-chat-AI_é­‚æ®¿_æ–—ç ´è‹ç©¹ .chat-title-main { color: var(--dq-soulhall-primary-light); text-shadow: 0 0 4px var(--dq-soulhall-accent-blackflame-light); }
.message.received[data-sender-id="AI_é­‚æ®¿_æ–—ç ´è‹ç©¹"] {
    border-right-color: var(--dq-soulhall-primary-light);
    background-color: rgba(var(--dq-soulhall-accent-blackflame-light-rgb),0.1);
}
.message.received[data-sender-id="AI_é­‚æ®¿_æ–—ç ´è‹ç©¹"] .message-sender { color: var(--dq-soulhall-accent-blackflame-light); }
.details-panel.AI_é­‚æ®¿_æ–—ç ´è‹ç©¹ #detailsName { color: var(--dq-soulhall-primary-light); }
.details-panel.AI_é­‚æ®¿_æ–—ç ´è‹ç©¹ .details-avatar.AI_é­‚æ®¿_æ–—ç ´è‹ç©¹ {
    border-image: linear-gradient(45deg, var(--dq-soulhall-accent-blackflame-light), var(--dq-soulhall-primary-light)) 1;
}
.details-panel.AI_é­‚æ®¿_æ–—ç ´è‹ç©¹ #aiContactAboutSection h4 span { color: var(--dq-soulhall-accent-blackflame-light); }


/* ğŸ–¤ éŸ©æ« - æš—çº¢ã€ç°é»‘ ğŸ–¤ */
.chat-list-item.special-contact.AI_éŸ©æ«_æ–—ç ´è‹ç©¹ .chat-list-avatar,
.chat-avatar-main.AI_éŸ©æ«_æ–—ç ´è‹ç©¹, .details-avatar.AI_éŸ©æ«_æ–—ç ´è‹ç©¹, #callingModalAvatar.AI_éŸ©æ«_æ–—ç ´è‹ç©¹ {
    background-color: var(--dq-hanfeng-accent-grayblack-light);
    color: var(--dq-hanfeng-primary-light);
    border-color: var(--dq-hanfeng-primary-light);
    text-shadow: 0 0 2px var(--dq-hanfeng-primary-light);
}
.chat-list-item.active.AI_éŸ©æ«_æ–—ç ´è‹ç©¹ {
    background-color: var(--dq-hanfeng-secondary-light);
    box-shadow: inset 3px 0 0 0 var(--dq-hanfeng-primary-light),
    0 0 10px rgba(var(--dq-hanfeng-accent-grayblack-light-rgb),0.3) inset;
}
.chat-list-item.active.AI_éŸ©æ«_æ–—ç ´è‹ç©¹ .chat-list-name { color: var(--dq-hanfeng-primary-light); }
.chat-header-main.current-chat-AI_éŸ©æ«_æ–—ç ´è‹ç©¹ .chat-title-main { color: var(--dq-hanfeng-primary-light); text-shadow: 0 0 3px var(--dq-hanfeng-accent-grayblack-light); }
.message.received[data-sender-id="AI_éŸ©æ«_æ–—ç ´è‹ç©¹"] {
    border-right-color: var(--dq-hanfeng-primary-light);
    background-color: rgba(var(--dq-hanfeng-accent-grayblack-light-rgb),0.08);
}
.message.received[data-sender-id="AI_éŸ©æ«_æ–—ç ´è‹ç©¹"] .message-sender { color: var(--dq-hanfeng-accent-grayblack-light); }
.details-panel.AI_éŸ©æ«_æ–—ç ´è‹ç©¹ #detailsName { color: var(--dq-hanfeng-primary-light); }
.details-panel.AI_éŸ©æ«_æ–—ç ´è‹ç©¹ .details-avatar.AI_éŸ©æ«_æ–—ç ´è‹ç©¹ {
    border-image: linear-gradient(45deg, var(--dq-hanfeng-primary-light), var(--dq-hanfeng-accent-grayblack-light)) 1;
}
.details-panel.AI_éŸ©æ«_æ–—ç ´è‹ç©¹ #aiContactAboutSection h4 span { color: var(--dq-hanfeng-accent-grayblack-light); }


/* ğŸŒ¿ æ—ä¿®å´– - é’ç°ã€é“ç»¿ ğŸŒ¿ */
.chat-list-item.special-contact.AI_æ—ä¿®å´–_æ–—ç ´è‹ç©¹ .chat-list-avatar,
.chat-avatar-main.AI_æ—ä¿®å´–_æ–—ç ´è‹ç©¹, .details-avatar.AI_æ—ä¿®å´–_æ–—ç ´è‹ç©¹, #callingModalAvatar.AI_æ—ä¿®å´–_æ–—ç ´è‹ç©¹ {
    background-color: var(--dq-linxiuya-primary-light);
    color: var(--dq-linxiuya-accent-irongreen-light);
    border-color: var(--dq-linxiuya-accent-irongreen-light);
}
.chat-list-item.active.AI_æ—ä¿®å´–_æ–—ç ´è‹ç©¹ {
    background-color: var(--dq-linxiuya-secondary-light);
    box-shadow: inset 3px 0 0 0 var(--dq-linxiuya-accent-irongreen-light),
    0 0 10px rgba(var(--dq-linxiuya-primary-light-rgb),0.2) inset;
}
.chat-list-item.active.AI_æ—ä¿®å´–_æ–—ç ´è‹ç©¹ .chat-list-name { color: var(--dq-linxiuya-accent-irongreen-light); }
.chat-header-main.current-chat-AI_æ—ä¿®å´–_æ–—ç ´è‹ç©¹ .chat-title-main { color: var(--dq-linxiuya-accent-irongreen-light); }
.message.received[data-sender-id="AI_æ—ä¿®å´–_æ–—ç ´è‹ç©¹"] {
    border-right-color: var(--dq-linxiuya-primary-light);
    background-color: rgba(var(--dq-linxiuya-primary-light-rgb),0.08);
}
.message.received[data-sender-id="AI_æ—ä¿®å´–_æ–—ç ´è‹ç©¹"] .message-sender { color: var(--dq-linxiuya-primary-light); }
.details-panel.AI_æ—ä¿®å´–_æ–—ç ´è‹ç©¹ #detailsName { color: var(--dq-linxiuya-accent-irongreen-light); }
.details-panel.AI_æ—ä¿®å´–_æ–—ç ´è‹ç©¹ .details-avatar.AI_æ—ä¿®å´–_æ–—ç ´è‹ç©¹ {
    border-image: linear-gradient(45deg, var(--dq-linxiuya-accent-irongreen-light), var(--dq-linxiuya-primary-light)) 1;
}
.details-panel.AI_æ—ä¿®å´–_æ–—ç ´è‹ç©¹ #aiContactAboutSection h4 span { color: var(--dq-linxiuya-primary-light); }


/* ä¿ç•™å…¶ä»–è§’è‰² (å°åŒ»ä»™, æµ·æ³¢ä¸œ, ç´«å¦) - ä»åŸCSSç»§æ‰¿ï¼Œå¯æŒ‰éœ€é€‚é…æ–°ä¸»é¢˜ */
/* å°åŒ»ä»™ */
.chat-list-item.special-contact.AI_å°åŒ»ä»™_æ–—ç ´è‹ç©¹ .chat-list-avatar,
.chat-avatar-main.AI_å°åŒ»ä»™_æ–—ç ´è‹ç©¹, .details-avatar.AI_å°åŒ»ä»™_æ–—ç ´è‹ç©¹, #callingModalAvatar.AI_å°åŒ»ä»™_æ–—ç ´è‹ç©¹ {
    background-color: var(--btth-xiaoyixian-primary-light); color: var(--dq-light-text-ink-black); border-color: var(--dq-light-text-ink-black);
}
.chat-list-item.active.AI_å°åŒ»ä»™_æ–—ç ´è‹ç©¹ { background-color: var(--btth-xiaoyixian-secondary-light); box-shadow: 0 0 8px var(--btth-xiaoyixian-primary-light) inset; }
.chat-list-item.active.AI_å°åŒ»ä»™_æ–—ç ´è‹ç©¹ .chat-list-name { color: var(--btth-xiaoyixian-primary-light); }
.chat-header-main.current-chat-AI_å°åŒ»ä»™_æ–—ç ´è‹ç©¹ .chat-title-main { color: var(--btth-xiaoyixian-primary-light); }
.message.received[data-sender-id="AI_å°åŒ»ä»™_æ–—ç ´è‹ç©¹"] { border-right: 2px solid var(--btth-xiaoyixian-primary-light); background-color: rgba(160, 165, 150, 0.05); }
.message.received[data-sender-id="AI_å°åŒ»ä»™_æ–—ç ´è‹ç©¹"] .message-sender { color: var(--btth-xiaoyixian-primary-light); }
.details-panel.AI_å°åŒ»ä»™_æ–—ç ´è‹ç©¹ #aiContactAboutSection h4 span, .details-panel.AI_å°åŒ»ä»™_æ–—ç ´è‹ç©¹ #detailsName { color: var(--btth-xiaoyixian-primary-light); }

/* æµ·æ³¢ä¸œ */
.chat-list-item.special-contact.AI_æµ·æ³¢ä¸œ_æ–—ç ´è‹ç©¹ .chat-list-avatar,
.chat-avatar-main.AI_æµ·æ³¢ä¸œ_æ–—ç ´è‹ç©¹, .details-avatar.AI_æµ·æ³¢ä¸œ_æ–—ç ´è‹ç©¹, #callingModalAvatar.AI_æµ·æ³¢ä¸œ_æ–—ç ´è‹ç©¹ {
    background-color: var(--btth-haibodong-primary-light); color: var(--dq-light-text-ink-black); border-color: var(--dq-light-text-ink-black);
}
.chat-list-item.active.AI_æµ·æ³¢ä¸œ_æ–—ç ´è‹ç©¹ { background-color: var(--btth-haibodong-secondary-light); box-shadow: 0 0 8px var(--btth-haibodong-primary-light) inset; }
.chat-list-item.active.AI_æµ·æ³¢ä¸œ_æ–—ç ´è‹ç©¹ .chat-list-name { color: var(--btth-haibodong-primary-light); }
.chat-header-main.current-chat-AI_æµ·æ³¢ä¸œ_æ–—ç ´è‹ç©¹ .chat-title-main { color: var(--btth-haibodong-primary-light); }
.message.received[data-sender-id="AI_æµ·æ³¢ä¸œ_æ–—ç ´è‹ç©¹"] { border-right: 2px solid var(--btth-haibodong-primary-light); background-color: rgba(150, 200, 230, 0.05); }
.message.received[data-sender-id="AI_æµ·æ³¢ä¸œ_æ–—ç ´è‹ç©¹"] .message-sender { color: var(--btth-haibodong-primary-light); }
.details-panel.AI_æµ·æ³¢ä¸œ_æ–—ç ´è‹ç©¹ #aiContactAboutSection h4 span, .details-panel.AI_æµ·æ³¢ä¸œ_æ–—ç ´è‹ç©¹ #detailsName { color: var(--btth-haibodong-primary-light); }

/* ç´«å¦ */
.chat-list-item.special-contact.AI_ç´«å¦_æ–—ç ´è‹ç©¹ .chat-list-avatar,
.chat-avatar-main.AI_ç´«å¦_æ–—ç ´è‹ç©¹, .details-avatar.AI_ç´«å¦_æ–—ç ´è‹ç©¹, #callingModalAvatar.AI_ç´«å¦_æ–—ç ´è‹ç©¹ {
    background-color: var(--btth-ziyan-primary-light); color: var(--dq-light-text-ink-black); border-color: var(--dq-light-text-ink-black);
}
.chat-list-item.active.AI_ç´«å¦_æ–—ç ´è‹ç©¹ { background-color: var(--btth-ziyan-secondary-light); box-shadow: 0 0 8px var(--btth-ziyan-primary-light) inset; }
.chat-list-item.active.AI_ç´«å¦_æ–—ç ´è‹ç©¹ .chat-list-name { color: var(--btth-ziyan-primary-light); }
.chat-header-main.current-chat-AI_ç´«å¦_æ–—ç ´è‹ç©¹ .chat-title-main { color: var(--btth-ziyan-primary-light); }
.message.received[data-sender-id="AI_ç´«å¦_æ–—ç ´è‹ç©¹"] { border-right: 2px solid var(--btth-ziyan-primary-light); background-color: rgba(190, 130, 220, 0.05); }
.message.received[data-sender-id="AI_ç´«å¦_æ–—ç ´è‹ç©¹"] .message-sender { color: var(--btth-ziyan-primary-light); }
.details-panel.AI_ç´«å¦_æ–—ç ´è‹ç©¹ #aiContactAboutSection h4 span, .details-panel.AI_ç´«å¦_æ–—ç ´è‹ç©¹ #detailsName { color: var(--btth-ziyan-primary-light); }


/* --- é€šç”¨æŒ‰é’®æ ·å¼ (ç«çº¹/é­‚çº¹ç‰¹æ•ˆ) --- */
.btn {
    border-radius: var(--border-radius);
    text-transform: none;
    letter-spacing: 0.5px;
    font-weight: 600; /* Bolder buttons */
    box-shadow: 0 1px 3px rgba(var(--dq-light-text-ink-black-rgb),0.2),
    inset 0 -2px 0px rgba(var(--dq-light-text-ink-black-rgb),0.1); /* Subtle 3D effect */
    border: 1px solid transparent;
    transition: all 0.2s ease-in-out;
    padding: 8px 18px;
    position: relative;
    overflow: hidden;
}
.btn::before { /* For hover/active glow effect */
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: transparent;
    border-radius: var(--border-radius);
    transition: background 0.3s ease;
    z-index: 0;
}
.btn > * { position: relative; z-index: 1; } /* Ensure text is above ::before */

/* ä¸»æŒ‰é’® - å¼‚ç«é‡‘çº¹åº•çº¹ */
.btn-primary {
    background-color: var(--primary-color);
    color: var(--text-color-inverted);
    border-color: var(--primary-color-dark);
}
.btn-primary:hover {
    background-color: var(--primary-color-dark);
    color: var(--text-color-inverted);
    box-shadow: 0 2px 6px rgba(var(--dq-light-qinglian-flame-rgb),0.3),
    inset 0 -1px 0px rgba(var(--dq-light-text-ink-black-rgb),0.15),
    0 0 10px rgba(var(--dq-light-luminous-gold-rgb),0.2); /* é‡‘çº¹å¾®å…‰ */
    transform: translateY(-1px);
}
.btn-primary:active::before {
    background: rgba(var(--dq-light-misty-scroll-bg-rgb), 0.15);
}

/* æ¬¡æŒ‰é’® - é­‚åŠ›é—ªçº¹ */
.btn-secondary {
    background-color: var(--dq-light-xuan-iron-border);
    color: var(--dq-light-text-ink-black);
    border-color: rgba(var(--dq-light-text-ink-black-rgb),0.2);
}
.btn-secondary:hover {
    background-color: rgb(190, 180, 160);
    box-shadow: 0 2px 6px rgba(var(--dq-light-xuan-iron-border-rgb),0.3),
    inset 0 -1px 0px rgba(var(--dq-light-text-ink-black-rgb),0.15),
    0 0 8px rgba(var(--dq-light-qinglian-flame-rgb),0.1); /* é­‚åŠ›é—ªçº¹ */
    transform: translateY(-1px);
}
.btn-secondary:active::before {
    background: rgba(var(--dq-light-text-ink-black-rgb), 0.1);
}

.btn-danger {
    background-color: var(--dq-light-crimson-ember);
    color: var(--dq-light-misty-scroll-bg);
    border-color: rgba(180, 50, 50, 0.8);
}
.btn-danger:hover {
    background-color: rgb(180, 50, 50);
    box-shadow: 0 2px 6px rgba(var(--dq-light-crimson-ember-rgb),0.3),
    inset 0 -1px 0px rgba(var(--dq-light-text-ink-black-rgb),0.15);
    transform: translateY(-1px);
}
.btn-success { /* Often similar to primary */
    background-color: var(--primary-color);
    color: var(--text-color-inverted);
    border-color: var(--primary-color-dark);
}
.btn-success:hover {
    background-color: var(--primary-color-dark);
    color: var(--text-color-inverted);
}


/* --- Modals (ç©ºé—´ç ´ç¢æˆ–ç«ç„°å‡ç»“çº¹) --- */
.loading-overlay { background-color: rgba(var(--dq-light-misty-scroll-bg-rgb), 0.9); backdrop-filter: blur(3px); }
.loading-spinner {
    width: 60px;
    height: 60px;
    border-width: 5px;
    border-top-color: var(--primary-color);
    border-left-color: var(--primary-color);
    border-bottom-color: rgba(var(--dq-light-qinglian-flame-rgb),0.2);
    border-right-color: rgba(var(--dq-light-qinglian-flame-rgb),0.2);
    animation: spin 1s linear infinite, dq-spinner-color-shift 3s linear infinite alternate;
}
@keyframes dq-spinner-color-shift {
    0% { border-top-color: var(--primary-color); border-left-color: var(--primary-color); }
    50% { border-top-color: var(--dq-light-luminous-gold); border-left-color: var(--dq-light-luminous-gold); }
    100% { border-top-color: var(--dq-light-crimson-ember); border-left-color: var(--dq-light-crimson-ember); }
}

.modal-content {
    background-color: var(--secondary-color);
    border: 1px solid var(--border-color);
    box-shadow: 0 5px 20px rgba(var(--dq-light-text-ink-black-rgb),0.2),
    0 0 0 2px rgba(var(--primary-color-rgb),0.15); /* ç«ç„°å‡ç»“çº¹ - Uses --primary-color-rgb */
    border-radius: var(--border-radius);
}
.modal-header h2 {
    color: var(--primary-color);
    text-shadow: 0 0 5px rgba(var(--primary-color-rgb),0.3), /* Uses --primary-color-rgb */
    0 0 8px rgba(var(--dq-light-luminous-gold-rgb),0.2);
}
.close-modal-btn:hover { color: var(--primary-color); }
.modal-body input[type="text"], .modal-body textarea {
    background-color: rgba(var(--dq-light-misty-scroll-bg-rgb), 0.85);
    color: var(--text-color);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    padding: 10px;
}
.modal-body input[type="text"]:focus, .modal-body textarea:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 1.5px rgba(var(--primary-color-rgb),0.3); /* Uses --primary-color-rgb */
}
.user-id-display #modalUserIdValue {
    background: rgba(var(--dq-light-misty-scroll-bg-rgb),0.8);
    color: var(--primary-color);
    border: 1px dashed var(--primary-color);
    padding: 8px 12px;
    border-radius: var(--border-radius);
    font-weight: 500;
}

/* Video Call */
.video-call-avatar { background-color: var(--dq-light-xuan-iron-border); border: 1px solid var(--border-color); }
.video-call-button.end-call { background: var(--danger-color); }
.video-call-button.active { background: var(--primary-color); color: var(--text-color-inverted); }

/* Toggle Switch */
.slider { background-color: var(--dq-light-xuan-iron-border); }
.slider:before { background-color: var(--dq-light-misty-scroll-bg); box-shadow: 0 1px 2px rgba(0,0,0,0.2); }
input:checked + .slider { background-color: var(--primary-color); }
input:checked + .slider:before { transform: translateX(20px); } /* Adjust based on slider size */


/* --- ç¡®ä¿ç‰¹å®šéšè—/æ˜¾ç¤ºéƒ¨åˆ† --- */
#detailsPanelContent #aiContactAboutSection,
#detailsPanelContent #detailsGroupManagement #addGroupMemberArea,
#detailsPanelContent #detailsGroupManagement #leftMembersArea,
#detailsPanelContent #groupActionsDetails,
#detailsPanelContent #dissolveGroupBtnDetails,
#mainMenuModal .settings-section.manual-connection-advanced,
#mainMenuModal #modalResetAllConnectionsBtn {
    display: none;
}

/* ç‰¹å®šäºAIè§’è‰²æ˜¾ç¤º"å…³äº"åŒºåŸŸçš„æ ·å¼ */
.details-panel.AI_è§ç‚_æ–—ç ´è‹ç©¹ #aiContactAboutSection,
.details-panel.AI_è¯è€_æ–—ç ´è‹ç©¹ #aiContactAboutSection,
.details-panel.AI_è§è–°å„¿_æ–—ç ´è‹ç©¹ #aiContactAboutSection,
.details-panel.AI_ç¾æœè_æ–—ç ´è‹ç©¹ #aiContactAboutSection,
.details-panel.AI_å°åŒ»ä»™_æ–—ç ´è‹ç©¹ #aiContactAboutSection,
.details-panel.AI_äº‘éŸµ_æ–—ç ´è‹ç©¹ #aiContactAboutSection,
.details-panel.AI_æµ·æ³¢ä¸œ_æ–—ç ´è‹ç©¹ #aiContactAboutSection,
.details-panel.AI_ç´«å¦_æ–—ç ´è‹ç©¹ #aiContactAboutSection,
.details-panel.AI_çº³å…°å«£ç„¶_æ–—ç ´è‹ç©¹ #aiContactAboutSection,
.details-panel.AI_é­‚æ®¿_æ–—ç ´è‹ç©¹ #aiContactAboutSection,
.details-panel.AI_éŸ©æ«_æ–—ç ´è‹ç©¹ #aiContactAboutSection,
.details-panel.AI_æ—ä¿®å´–_æ–—ç ´è‹ç©¹ #aiContactAboutSection {
    display: block;
}

.details-panel.human-contact-active #contactActionsDetails { display: block; }
.details-panel.group-chat-active #detailsGroupManagement,
.details-panel.group-chat-active #groupActionsDetails { display: block; }

.notification {
    background: var(--dq-light-ancient-jade-panel);
    border-left: 4px solid var(--primary-color);
    color: var(--text-color);
    box-shadow: 0 2px 8px rgba(var(--dq-light-text-ink-black-rgb),0.15);
    border-radius: var(--border-radius);
    padding: 12px 18px;
}
.notification.error {
    border-left-color: var(--danger-color);
}
.notification.success {
    border-left-color: var(--dq-light-luminous-gold); /* Or a dedicated success green */
}